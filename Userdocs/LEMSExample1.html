
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Example 1: Dimensions, Units, ComponentTypes and Components &#8212; NeuroML Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=9c3e77be" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/zcustom.css?v=f191df08" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=1ae7504c"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Userdocs/LEMSExample1';</script>
    <script src="../_static/search_boxes.js?v=5dfd38c8"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example 2: tidying up example 1" href="LEMSExample2.html" />
    <link rel="prev" title="Model structure overview" href="LEMSOverview.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../Landing.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="NeuroML Documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="NeuroML Documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="MissionAndAims.html">Mission and Aims</a></li>
<li class="toctree-l1"><a class="reference internal" href="Usage.html">How to use this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="GetNeuroML.html">Get NeuroML</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="GettingStarted.html">Getting started with NeuroML</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="SingleNeuronExample.html">Simulating a regular spiking Izhikevich neuron</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/SingleNeuron.html">Interactive single Izhikevich neuron NeuroML example</a></li>
<li class="toctree-l2"><a class="reference internal" href="IzhikevichNetworkExample.html">A two population network of regular spiking Izhikevich neurons</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/IzhikevichNetwork.html">Interactive two population network example</a></li>
<li class="toctree-l2"><a class="reference internal" href="SingleCompartmentHHExample.html">Simulating a single compartment Hodgkin-Huxley neuron</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/HH_single_compartment.html">Interactive single compartment HH example</a></li>
<li class="toctree-l2"><a class="reference internal" href="MultiCompartmentOLMexample.html">Simulating a multi compartment OLM neuron</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/OLM.html">Interactive multi-compartment OLM cell example</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/NeuroML-DB.html">Create novel NeuroML models from components on NeuroML-DB</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="FindingNeuroMLModels.html">Finding and sharing NeuroML models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="CreatingNeuroMLModels.html">Creating NeuroML models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="ConvertingModels.html">Converting models to NeuroML and sharing them on Open Source Brain</a></li>
<li class="toctree-l2"><a class="reference internal" href="ImportingMorphologyFiles.html">Handling Morphology Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5.html">HDF5 support</a></li>
<li class="toctree-l2"><a class="reference internal" href="Provenance.html">Maintaining provenance in NeuroML models</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="ValidatingNeuroMLModels.html">Validating NeuroML Models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="VisualisingNeuroMLModels.html">Visualising NeuroML Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="VisualisingChannels.html">Visualising and analysing ion channel models</a></li>
<li class="toctree-l2"><a class="reference internal" href="VisualisingCells.html">Visualising and analysing cell models</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="SimulatingNeuroMLModels.html">Simulating NeuroML Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="OptimisingNeuroMLModels.html">Optimising/fitting NeuroML Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="TestingNeuroMLModels.html">Testing/validating NeuroML Models</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="LEMS.html">LEMS: Low Entropy Model Specification</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="LEMSOverview.html">Model structure overview</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Example 1: Dimensions, Units, ComponentTypes and Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample2.html">Example 2: tidying up example 1</a></li>


<li class="toctree-l2"><a class="reference internal" href="LEMSExample3.html">Example 3: Connection dependent synaptic components</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample4.html">Example 4: Kinetic schemes</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample5.html">Example 5: References and paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample6.html">Example 6: User defined types for simulation and display</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample7.html">Example 7: User defined types for networks and populations</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample8.html">Example 8: Regimes in Dynamics definitions</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Specification.html">Schema/Specification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="NeuroMLv2.html">NeuroML v2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="Schemas/NeuroMLDocument.html">NeuroMLDocument</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/NeuroMLCoreDimensions.html">NeuroMLCoreDimensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/NeuroMLCoreCompTypes.html">NeuroMLCoreCompTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Cells.html">Cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Channels.html">Channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Synapses.html">Synapses</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Inputs.html">Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Networks.html">Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/PyNN.html">PyNN</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Simulation.html">Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Index.html">Index</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="NeuroMLv1.html">NeuroML v1</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="LEMSSchema.html">LEMS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Modelstructure.html">Model structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Unitsanddimensions.html">Units and dimensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Definingcomponenttypes.html">Defining component types</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Dynamics.html">Dynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Structure.html">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Simulation.html">Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Procedure.html">Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/DefiningComponents.html">Defining Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Geometry.html">Geometry</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="NeuroMLv2AndLEMS.html">NeuroML 2 and LEMS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="UnitsAndDimensions.html">Units and dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Paths.html">Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuantitiesAndRecording.html">Quantities and recording</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSSimulation.html">LEMS Simulation files</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="ExtendingNeuroMLv2.html">Extending NeuroML</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Software/Software.html">Software and Tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Software/pyNeuroML.html">pyNeuroML</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/libNeuroML.html">libNeuroML</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/pyLEMS.html">pyLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/NeuroMLlite.html">NeuroMLlite</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/jNeuroML.html">jNeuroML</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/jLEMS.html">jLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/NeuroML_API.html">NeuroML C++ API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/MatLab.html">MatLab NeuroML Toolbox</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="Software/SupportingTools.html">Tools and resources with NeuroML support</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/Approaches.html">Approaches to adding NeuroML support</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/NEURON.html">NEURON and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/NetPyNE.html">NetPyNE and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/PyNN.html">PyNN and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/Brian.html">Brian and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/MOOSE.html">MOOSE and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/EDEN.html">EDEN and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/Arbor.html">Arbor and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/N2A.html">N2A and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/NEST.html">NEST and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/SWC.html">SWC and NeuroML</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="Publications.html">Citing NeuroML and related publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently asked questions (FAQ)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Walkthroughs/Walkthroughs.html">Walk throughs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="Walkthroughs/RayEtAl2020/RayEtAl2020.html">Converting Ray et al 2020 to NeuroML</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="Walkthroughs/RayEtAl2020/Setup.html">Setting up</a></li>
<li class="toctree-l3"><a class="reference internal" href="Walkthroughs/RayEtAl2020/Conversion.html">Converting to NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Walkthroughs/RayEtAl2020/OMV.html">Adding OMV tests</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">NeuroML events</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Events/Events.html">NeuroML outreach and events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202407-CNS2024.html">July 2024: NeuroML tutorial at CNS 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202404-Harmony.html">April 2024: NeuroML hackathon at HARMONY 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/20220630-CNS2022.html">June 2022: NeuroML tutorial at CNS*2022 satellite tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202204-Harmony.html">April 2022: NeuroML development workshop at HARMONY 2022</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202109-COMBINE.html">October 2021: NeuroML development workshop at COMBINE meeting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202108-INCF-Training-Week.html">August 2021: NeuroML tutorial at INCF Training Weeks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202107-CNS2021.html">July 2021: NeuroML tutorial at CNS*2021</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202103-Harmony.html">March 2021: NeuroML hackathon at HARMONY 2021</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/2012-Edinburgh.html">March 2012: Fourth NeuroML Development Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/PastEvents.html">Past NeuroML Events</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The NeuroML Initiative</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/CommunicationChannels.html">Getting in touch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Standards.html">Overview of standards in neuroscience</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/History.html">A brief history of NeuroML</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../NeuroMLOrg/Board.html">NeuroML Editorial Board</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../NeuroMLOrg/BoardHistory.html">History of the NeuroML Editorial Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NeuroMLOrg/BoardMeetingReports.html">Workshop and Meeting reports</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/ScientificCommittee.html">NeuroML Scientific Committee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Funding.html">Funding and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/OutreachTraining.html">Outreach and training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Contributors.html">NeuroML contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Repositories.html">NeuroML repositories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/CoC.html">Code of Conduct</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Devdocs/Devdocs.html">Overview</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Devdocs/DevSOP.html">Contribution guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Devdocs/ReleaseProcess.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Devdocs/UpdatingStandard.html">Making changes to the NeuroML standard</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../Devdocs/InteractionOtherBits.html">Interaction with other languages and standards</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Reference/Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Reference/zBibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NeuroML/Documentation" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NeuroML/Documentation/edit/main/source/Userdocs/LEMSExample1.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NeuroML/Documentation/issues/new?title=Issue%20on%20page%20%2FUserdocs/LEMSExample1.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Userdocs/LEMSExample1.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Example 1: Dimensions, Units, ComponentTypes and Components</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="example-1-dimensions-units-componenttypes-and-components">
<span id="userdocs-lemsexample1"></span><h1>Example 1: Dimensions, Units, ComponentTypes and Components<a class="headerlink" href="#example-1-dimensions-units-componenttypes-and-components" title="Link to this heading">#</a></h1>
<p>This page is structured as a walk-through of a single example explaining the various elements as they occur.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Lems&gt;</span>

<span class="w">    </span><span class="nt">&lt;Target</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;sim1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;-3&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;-2&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;-2&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;iaf1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;threshold&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;refractoryPeriod&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;mV&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;ms&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;pS&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;nS&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-9&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;uF&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-6&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;nF&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-9&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;pF&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;per_ms&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;pA&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;-12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;iaf1</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;celltype_a&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;-30 mV&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;2 ms&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;3uF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- or --&gt;</span>
<span class="w">    </span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ctb&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;iaf1&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;-30 mV&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;2 ms&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1uF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;iaf2&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;iaf1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Fixed</span><span class="w"> </span><span class="na">parameter=</span><span class="s">&quot;threshold&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-45mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>

<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;iaf3&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;iaf1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;leakConductance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;leakReversal&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;deltaV&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;EventPort</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spikes-in&quot;</span><span class="w"> </span><span class="na">direction=</span><span class="s">&quot;in&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;leakConductance * (leakReversal - v) / capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">            </span><span class="nt">&lt;OnEvent</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;spikes-in&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;v + deltaV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/OnEvent&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>

<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spikeGenerator&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;period&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;EventPort</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="na">direction=</span><span class="s">&quot;out&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;OnCondition</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;tsince .gt. period&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;EventOut</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/OnCondition&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spikeGenerator2&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;spikeGenerator&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tlast&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;t - tlast&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;OnCondition</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;t - tlast .gt. period&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;tlast&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;t&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;EventOut</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/OnCondition&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rate&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;midpoint&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;scale&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rate * exp((v - midpoint)/scale)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHSigmoidRate&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rate / (1 + exp( -(v - midpoint)/scale))&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHExpLinearRate&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(v - midpoint) / scale&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rate * x / (1 - exp(-x))&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHGate0&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;power&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Forward&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Reverse&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rf&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Forward/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rr&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Reverse/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rf * (1 - q) - rr * q&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;q^power&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHGate&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;power&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Forward&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Reverse&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ex&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;exp(x)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;ex / (1 + ex)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rf&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Forward/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rr&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Reverse/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(1 + ex)^2 / ex * (rf * (1 - q) - rr * q)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;q^power&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHChannel&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Children</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gates&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHGate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;g&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gatefeff&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span>
<span class="w">                             </span><span class="na">select=</span><span class="s">&quot;gates[*]/fcond&quot;</span><span class="w"> </span><span class="na">reduce=</span><span class="s">&quot;multiply&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;g&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;g&quot;</span>
<span class="w">                             </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;conductance * gatefeff&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>


<span class="w">    </span><span class="nt">&lt;HHChannel</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;na&quot;</span><span class="w"> </span><span class="na">conductance=</span><span class="s">&quot;20pS&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;HHGate</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;m&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Forward</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpLinearRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;1.per_ms&quot;</span>
<span class="w">                     </span><span class="na">midpoint=</span><span class="s">&quot;-40mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;10mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;Reverse</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;4per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-65mV&quot;</span>
<span class="w">                     </span><span class="na">scale=</span><span class="s">&quot;-18mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/HHGate&gt;</span>
<span class="w">        </span><span class="nt">&lt;HHGate</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;h&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Forward</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;0.07per_ms&quot;</span>
<span class="w">                     </span><span class="na">midpoint=</span><span class="s">&quot;-65.mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;-20.mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;Reverse</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHSigmoidRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;1per_ms&quot;</span>
<span class="w">                     </span><span class="na">midpoint=</span><span class="s">&quot;-35mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;10mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/HHGate&gt;</span>
<span class="w">    </span><span class="nt">&lt;/HHChannel&gt;</span>


<span class="w">    </span><span class="nt">&lt;HHChannel</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;k&quot;</span><span class="w"> </span><span class="na">conductance=</span><span class="s">&quot;20pS&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;HHGate</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;n&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Forward</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpLinearRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;0.1per_ms&quot;</span>
<span class="w">                     </span><span class="na">midpoint=</span><span class="s">&quot;-55mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;10mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;Reverse</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;0.125per_ms&quot;</span>
<span class="w">                     </span><span class="na">midpoint=</span><span class="s">&quot;-65mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;-80mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/HHGate&gt;</span>
<span class="w">    </span><span class="nt">&lt;/HHChannel&gt;</span>


<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ChannelPopulation&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;ComponentReference</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;channel&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHChannel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;number&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;erev&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;channelg&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;channel/g&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;geff&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;channelg * number&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;geff * (erev - v)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>

<span class="w">        </span><span class="nt">&lt;Structure&gt;</span>
<span class="w">            </span><span class="nt">&lt;ChildInstance</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;channel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Structure&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>



<span class="w">    </span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHCell&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Children</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;populations&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;ChannelPopulation&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;injection&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v0&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Dynamics&gt;</span>
<span class="w">            </span><span class="nt">&lt;OnStart&gt;</span>
<span class="w">                </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;v0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/OnStart&gt;</span>

<span class="w">            </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;totcurrent&quot;</span>
<span class="w">                             </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;populations[*]/current&quot;</span>
<span class="w">                             </span><span class="na">reduce=</span><span class="s">&quot;add&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;v&quot;</span>
<span class="w">                           </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span>
<span class="w">                            </span><span class="na">value=</span><span class="s">&quot;(totcurrent + injection) / capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ComponentType&gt;</span>



<span class="w">    </span><span class="nt">&lt;HHCell</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;hhcell_1&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1pF&quot;</span><span class="w"> </span><span class="na">injection=</span><span class="s">&quot;4pA&quot;</span><span class="w"> </span><span class="na">v0=</span><span class="s">&quot;-60mV&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;ChannelPopulation</span><span class="w"> </span><span class="na">channel=</span><span class="s">&quot;na&quot;</span><span class="w"> </span><span class="na">number=</span><span class="s">&quot;6000&quot;</span><span class="w">  </span><span class="na">erev=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;ChannelPopulation</span><span class="w"> </span><span class="na">channel=</span><span class="s">&quot;k&quot;</span><span class="w"> </span><span class="na">number=</span><span class="s">&quot;1800&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/HHCell&gt;</span>


<span class="w">    </span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;celltype_c&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;iaf3&quot;</span><span class="w"> </span><span class="na">leakConductance=</span><span class="s">&quot;3 pS&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;3 ms&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;45 mV&quot;</span><span class="w"> </span><span class="na">leakReversal=</span><span class="s">&quot;-50 mV&quot;</span><span class="w"> </span><span class="na">deltaV=</span><span class="s">&quot;5mV&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1uF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;gen1&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spikeGenerator&quot;</span><span class="w"> </span><span class="na">period=</span><span class="s">&quot;30ms&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;gen2&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spikeGenerator2&quot;</span><span class="w"> </span><span class="na">period=</span><span class="s">&quot;32ms&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;iaf3cpt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;iaf3&quot;</span><span class="w"> </span><span class="na">leakReversal=</span><span class="s">&quot;-50mV&quot;</span><span class="w"> </span><span class="na">deltaV=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;-30mV&quot;</span><span class="w"> </span><span class="na">leakConductance=</span><span class="s">&quot;50pS&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;4ms&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1pF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>


<span class="w">    </span><span class="nt">&lt;Include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;SimpleNetwork.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>


<span class="w">    </span><span class="nt">&lt;Network</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;net1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Population</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;p1&quot;</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;gen1&quot;</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Population</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;p2&quot;</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;gen2&quot;</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Population</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;p3&quot;</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;iaf3cpt&quot;</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;Population</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;hhpop&quot;</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;hhcell_1&quot;</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;EventConnectivity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;p1-p3&quot;</span><span class="w"> </span><span class="na">source=</span><span class="s">&quot;p1&quot;</span><span class="w"> </span><span class="na">target=</span><span class="s">&quot;p3&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Connections</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;AllAll&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/EventConnectivity&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Network&gt;</span>


<span class="w">    </span><span class="nt">&lt;Include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;SingleSimulation.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span>
<span class="w">    </span><span class="nt">&lt;Simulation</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;sim1&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;80ms&quot;</span><span class="w"> </span><span class="na">step=</span><span class="s">&quot;0.01ms&quot;</span><span class="w"> </span><span class="na">target=</span><span class="s">&quot;net1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Display</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;d0&quot;</span><span class="w"> </span><span class="na">title=</span><span class="s">&quot;Example 1: Dimensions, Units, ComponentTypes and Components&quot;</span><span class="w"> </span>
<span class="w">                 </span><span class="na">timeScale=</span><span class="s">&quot;1ms&quot;</span><span class="w"> </span><span class="na">xmin=</span><span class="s">&quot;-10&quot;</span><span class="w"> </span><span class="na">xmax=</span><span class="s">&quot;90&quot;</span><span class="w"> </span><span class="na">ymin=</span><span class="s">&quot;-90&quot;</span><span class="w"> </span><span class="na">ymax=</span><span class="s">&quot;60&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Line</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">quantity=</span><span class="s">&quot;p1[0]/tsince&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;1ms&quot;</span><span class="w"> </span><span class="na">timeScale=</span><span class="s">&quot;1ms&quot;</span><span class="w"> </span><span class="na">color=</span><span class="s">&quot;#00c000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;Line</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;p3v&quot;</span><span class="w"> </span><span class="na">quantity=</span><span class="s">&quot;p3[0]/v&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;1mV&quot;</span><span class="w"> </span><span class="na">timeScale=</span><span class="s">&quot;1ms&quot;</span><span class="w"> </span><span class="na">color=</span><span class="s">&quot;#0000f0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;Line</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;p0v&quot;</span><span class="w"> </span><span class="na">quantity=</span><span class="s">&quot;hhpop[0]/v&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;1mV&quot;</span><span class="w"> </span><span class="na">timeScale=</span><span class="s">&quot;1ms&quot;</span><span class="w"> </span><span class="na">color=</span><span class="s">&quot;#ff4040&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Display&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Simulation&gt;</span>

<span class="nt">&lt;/Lems&gt;</span>
</pre></div>
</div>
<p>The whole model is wrapped in a block which, for now, is called Lems (Low Entropy Model Specification). Then we define the dimensions that will be used in this model. Typically these would be loaded from an external file along with various other stuff, not repeated in each model, but it is included here in the interests of having a single file for everything.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;-2&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;-2&quot;</span><span class="w"> </span><span class="na">t=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Dimension</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">i=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Each dimension element just associates a dimension name with the exponents for mass, length, time and current.</p>
<p>At this stage, one can begin defining component types.
This is done with the ComponentType element and child Parameter elements.
A simple cell model with three parameters could be defined as:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cell1&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;threshold&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;refractoryPeriod&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">    </span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>Each of the Parameter elements defines a parameter that should be supplied when a component is defined based on this type.
Before we can define a component though, we need some units to use in setting those values.</p>
<p>Defining a unit involves supplying the symbol, dimension and the power of ten by which it is scaled from the IS base unit.
Note that units have a symbol, not a name.
This is because they occur as a component of an assignment expression such as threshold=-45mV not as a reference such as dimension=voltage. In general, where one component refers to another, then the attribute value is the name of the thing being referred to, and the attribute name is the lower case version of the type of the thing being referred to.
Thus when a dimension is declared with &lt;Dimension name=voltage/&gt; then it is referred to from a Parameter as <Parameter dimension="voltage"/>. This holds for all references to components of a particular type.</p>
<p>Returning to the units, this model will use the following, which normally would also be loaded from an external file of standard settings.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;mV&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;ms&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;pS&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;nS&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-9&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;uF&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-6&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;nF&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-9&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;pF&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;per_ms&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Unit</span><span class="w"> </span><span class="na">symbol=</span><span class="s">&quot;pA&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">powTen=</span><span class="s">&quot;-12&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Once the units are available it is possible to define a component.
There are two equivalent ways of doing this: either by using the Component element and setting its type, or by using the type as a new XML element.
The latter may be a little more readable, but for a simple component like this it doesnt make much difference.
For more complicated components with nested children though, the second form is definitely clearer (eg see the HHChannel examples later).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ctb&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;cell1&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;-30 mV&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;2 ms&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1uF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;cell1</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;celltype_a&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;-30 mV&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;2 ms&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;3uF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>In specifying a component, a value must be supplied for each of the parameters defined in the corresponding type.
The value is composed of a number and a unit.
It cant include expressions with multiple units for the values so, for example, to express an acceleration you couldnt write 3 m s^-2. Instead would need to define a unit element for the compound unit (and a dimension element for acceleration) and use that.</p>
<p>Specifying all the parameters for each component can lead to duplication.
Suppose, for example, you want to build a range of cell models all based on cell1, but you dont want to change the threshold.
You could define a new type without the threshold, but it is neater to still use the same type but specify that you are restricting attention to the set that all have a particular value for the threshold.
This can be done by creating a new type that extends the cell1 type and includes a Fixed element to fix the threshold:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cell2&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;cell1&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Fixed</span><span class="w"> </span><span class="na">parameter=</span><span class="s">&quot;threshold&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-45mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>The cell2 type can now be used by only setting the remaining two parameters.</p>
<p>As well as restricting types when you extend them, you can also add new parameters as shown in the next type.
This also introduces an EventPort, to indicate that instances of components built from this type can receive events, and, finally, a Dynamics block.
This is where the Dynamics of instances of the component can be specified.
The phrase instances of the component is intentional.
The type itself doesnt behave: it is just a definition.
A component built from the type doesnt behave either: it is just a set of parameter values linked back to the type.
The thing that behaves is an instance in a runnable model that actually contains state variables.
In general, many components may be based on one type, and one component may give rise to many instances in a running model.</p>
<p>Here is a basic capacitative cell with a leaking potential and a simple event handler.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cell3&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;cell1&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;leakConductance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;leakReversal&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;deltaV&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;EventPort</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spikes-in&quot;</span><span class="w"> </span><span class="na">direction=</span><span class="s">&quot;in&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">        </span>
<span class="w">      </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">        </span>
<span class="w">      </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;leakConductance * (leakReversal - v) / capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">        </span>
<span class="w">      </span><span class="nt">&lt;OnEvent</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;spikes-in&quot;</span><span class="nt">&gt;</span><span class="w">             </span>
<span class="w">         </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;v + deltaV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">        </span>
<span class="w">      </span><span class="nt">&lt;/OnEvent&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>The Dynamics involves a single state variable, a voltage called v, and one equation, expressing how v drifts towards the leak reversal potential.
The event block specifies what happens when an instance receives an event.
In this case the state variable v is bumped up by deltaV. The value attribute in the TimeDerivative element is an expression involving the parameters and the state variables.
It gives the right hand side of a first order differential equation dv/dt = (). Expressions follow normal operator precedence rules with ^ for general powers and exp(x) for exponentials.</p>
<p>Below is another example of a Dynamics, this time with an output port and a condition testing block that sends an event when the condition becomes true.
The test attribute in the OnCondition element is a boolean valued expression.
These use Fortran style operators (.gt. and .lt. for &gt; and &lt;) to avoid confusion with xml angle brackets.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spikeGenerator&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;period&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;EventPort</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="na">direction=</span><span class="s">&quot;out&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;OnCondition</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;tsince .gt. period&quot;</span><span class="nt">&gt;</span><span class="w">             </span>
<span class="w">         </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">             </span>
<span class="w">         </span><span class="nt">&lt;EventOut</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;/OnCondition&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>The above model is one way of writing a regular event generator.
It has a state variable that grows in sync with t until it reaches a threshold when the event fires and it is reset.
The model below achieves the same effect without solving a differential equation.
Instead, it asks for access to the global time variable (t is the one global variable that is always available) and uses that in the test condition.
[aside - theres a slight problem here since t exists even if the model doesnt define a dimension called time].</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;spikeGenerator2&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;spikeGenerator&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;GlobalVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;t&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tlast&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;tsince&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;t - tlast&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;OnCondition</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;t - tlast .gt. period&quot;</span><span class="nt">&gt;</span><span class="w">             </span>
<span class="w">         </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;tlast&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;t&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">             </span>
<span class="w">         </span><span class="nt">&lt;EventOut</span><span class="w"> </span><span class="na">port=</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;/OnCondition&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>The examples so far have all been of very simple components which just had a single set of parameters.
Real models however require rather more structure than this with components having children of various types and possibly multiple children of certain types.
To illustrate this, the next example shows how the concept of an ion channel using Hodgkin-Huxley Dynamics can be defined.</p>
<p>Starting from the bottom, we define the different types of rate equations that occur.
These will supply terms in the equations for the derivatives of the gating particles.
There are three different expressions used in the HH equations, but they can all be expressed with three parameters, rate, midpoint and scale.
We first define a general rate class, and then extend it for the three cases.</p>
<p>The HHRate Dynamics shows two new constructs.
An Exposure declares that the component makes a quantity available to other components.
A Requirement specifies that the component needs to know about a variable that it doesnt define itself.
When it is used in a model, the specified variable must be available (and have the right dimension) in the parent component or one of its more remote ancestors.</p>
<p>Note that the general HHRate class defines an Exposure without a Dynamics block to actually set its value.
This is analogous to an abstract class in java: you cant actually make a component out of the HHRate element directly (the interpreter will complain) but any component using a HHRate will know it has an exposed variable called r. The types that extend HHRate have to supply a value for r before they are fully defined and ready to be used.</p>
<p>So here is the basic HHRate and its three extensions:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rate&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;midpoint&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;scale&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;per_time&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">    </span>
<span class="nt">&lt;/ComponentType&gt;</span>
<span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rate * exp((v - midpoint)/scale)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
<span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHSigmoidRate&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rate / (1 + exp(0 - (v - midpoint)/scale))&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
<span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHExpLinearRate&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;HHRate&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(v - midpoint) / scale&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;r&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rate * x / (1 - exp(0 - x))&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>Now the rate elements are available, they can be used to define a component for a gate in a HH model.
This introduces the Child element which says that components built using this type must include a subcomponent of the specified type.
A HH gate needs subcomponents for the forward and reverse rates.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHGate0&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;power&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">      </span>
<span class="w">   </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Forward&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Reverse&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rf&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Forward/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rr&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Reverse/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">          </span>
<span class="w">      </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;rf * (1 - q) - rr * q&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;q^power&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>The above is a perfectly reasonable way to define a HH gate but unfortunately it needs smarter numerics than the simple forward Euler rule used in the proof of concept interpreter.
Running this model with the Euler method leads to numerical instabilities.
Happily, this problem can be circumvented without improving the numerics by changing the state variable.
Instead of q which is defined on [0, 1] you can use x defined on (-infinity, infinity) which works much better with a naive integration scheme.
This is what it looks like with x instead of q:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHGate&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;power&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">      </span>
<span class="w">   </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Forward&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Reverse&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHRate&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ex&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;exp(x)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;ex / (1 + ex)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rf&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Forward/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rr&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;Reverse/r&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">          </span>
<span class="w">      </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(1 + ex)^2 / ex * (rf * (1 - q) - rr * q)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;fcond&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;q^power&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>Now the gate type has been defined, it can be used to say what a HH Channel actually is.
In this picture, a channel just has a conductance and one or more gates:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHChannel&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Children</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gates&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHGate&quot;</span><span class="w"> </span><span class="na">min=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">max=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;g&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;conductance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">          </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">                  </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gatefeff&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;gates[*]/fcond&quot;</span><span class="w"> </span><span class="na">reduce=</span><span class="s">&quot;multiply&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;g&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;g&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;conductance * gatefeff&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>This introduces one new construct, the Children element, that allows for an indeterminate number of children of a given type.
This means that the same type can be used for potassium channels with only one gate, sodium channels with two gates or indeed other channels with more gates.
The first derived variable in the Dynamics block uses a xpath-style selection function to process the indeterminate number of children.
In this case it computes the produce of the fcond variables from the different gates.</p>
<p>With these definitions in place, it is now possible to define some channel models.
The classic Hodgkin-Huxley sodium channel can be represented as:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;HHChannel</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;na&quot;</span><span class="w"> </span><span class="na">conductance=</span><span class="s">&quot;20pS&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;HHGate</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;m&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Forward</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpLinearRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;1.per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-40mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;10mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Reverse</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;4per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-65mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;-18mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/HHGate&gt;</span><span class="w">          </span>
<span class="w">   </span><span class="nt">&lt;HHGate</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;h&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Forward</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;0.07per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-65.mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;-20.mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Reverse</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHSigmoidRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;1per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-35mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;10mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/HHGate&gt;</span>
<span class="nt">&lt;/HHChannel&gt;</span>
</pre></div>
</div>
<p>The potassium channel uses exactly the same types, but has only one gate:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;HHChannel</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;k&quot;</span><span class="w"> </span><span class="na">conductance=</span><span class="s">&quot;20pS&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;HHGate</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;n&quot;</span><span class="w"> </span><span class="na">power=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Forward</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpLinearRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;0.1per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-55mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;10mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Reverse</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHExpRate&quot;</span><span class="w"> </span><span class="na">rate=</span><span class="s">&quot;0.125per_ms&quot;</span><span class="w"> </span><span class="na">midpoint=</span><span class="s">&quot;-65mV&quot;</span><span class="w"> </span><span class="na">scale=</span><span class="s">&quot;-80mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/HHGate&gt;</span>
<span class="nt">&lt;/HHChannel&gt;</span>
</pre></div>
</div>
<p>These channel models are an example where the ability to use the type name as the XML tag makes the model much clearer: the alternative just with three levels of Component elements would look rather unhelpful.</p>
<p>Although the channel models have now been defined, they still need to be used in a cell before anything can be run.
For this well just define a basic channel population type.
There is one new construct here: the ComponentRef element which in this case says that a channel population needs a reference to a component of type HHChannel. This is much like a Child element, but instead of the component being defined then and there inside the channel population, there is just a reference to it.</p>
<p>The Dynamics block for a cannel population just computes the total conductance and then the current, in this case using Ohms law.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ChannelPopulation&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;ComponentRef</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;channel&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;HHChannel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;number&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;none&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;erev&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Requirement</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;channelg&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;channel/g&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;geff&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;channelg * number&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">exposure=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;geff * (erev - v)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>To use these populations, they need inserting in a cell.
The following type represents a simple cell with a number of populations and an option to inject a current so it does something interesting.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ComponentType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;HHCell&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Children</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;populations&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;ChannelPopulation&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;injection&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;current&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Parameter</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v0&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Exposure</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Dynamics&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;OnStart&gt;</span><span class="w">              </span>
<span class="w">         </span><span class="nt">&lt;StateAssignment</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;v0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;/OnStart&gt;</span><span class="w">             </span>
<span class="w">      </span><span class="nt">&lt;DerivedVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;totcurrent&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;populations[*]/current&quot;</span><span class="w"> </span><span class="na">reduce=</span><span class="s">&quot;add&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;StateVariable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">dimension=</span><span class="s">&quot;voltage&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">          </span>
<span class="w">      </span><span class="nt">&lt;TimeDerivative</span><span class="w"> </span><span class="na">variable=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(totcurrent + injection) / capacitance&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Dynamics&gt;</span>
<span class="nt">&lt;/ComponentType&gt;</span>
</pre></div>
</div>
<p>This Dynamics block introduces the OnStart element which is much like the OnEvent elements earlier, except the block applies only when the simulation starts.
In this case it just sets the voltage to a value supplied as a parameter.
The Dynamics block uses another selector function sum( to sum the currents delivered by the various populations.</p>
<p>Now all the definitions are in place to define a cell model with a couple of channel populations:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;HHCell</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;hhcell_1&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1pF&quot;</span><span class="w"> </span><span class="na">injection=</span><span class="s">&quot;4pA&quot;</span><span class="w"> </span><span class="na">v0=</span><span class="s">&quot;-60mV&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;ChannelPopulation</span><span class="w"> </span><span class="na">channel=</span><span class="s">&quot;na&quot;</span><span class="w"> </span><span class="na">number=</span><span class="s">&quot;6000&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;ChannelPopulation</span><span class="w"> </span><span class="na">channel=</span><span class="s">&quot;k&quot;</span><span class="w"> </span><span class="na">number=</span><span class="s">&quot;1800&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/HHCell&gt;</span>
</pre></div>
</div>
<p>To go with this cell type, we can define some components using the other types defined earlier.
Note how celltype_d is based on an existing component via the extends attribute and only replaces one parameter value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;celltype_c&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;iaf3&quot;</span><span class="w"> </span><span class="na">leakConductance=</span><span class="s">&quot;3 pS&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;3 ms&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;45 mV&quot;</span><span class="w"> </span><span class="na">leakReversal=</span><span class="s">&quot;-50 mV&quot;</span><span class="w"> </span><span class="na">deltaV=</span><span class="s">&quot;5mV&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1uF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;celltype_d&quot;</span><span class="w"> </span><span class="na">extends=</span><span class="s">&quot;celltype_c&quot;</span><span class="w"> </span><span class="na">leakConductance=</span><span class="s">&quot;5 pS&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;gen1&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spikeGenerator&quot;</span><span class="w"> </span><span class="na">period=</span><span class="s">&quot;30ms&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;gen2&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spikeGenerator2&quot;</span><span class="w"> </span><span class="na">period=</span><span class="s">&quot;32ms&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;Component</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;cell3cpt&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;cell3&quot;</span><span class="w"> </span><span class="na">leakReversal=</span><span class="s">&quot;-50mV&quot;</span><span class="w"> </span><span class="na">deltaV=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="na">threshold=</span><span class="s">&quot;-30mV&quot;</span><span class="w"> </span><span class="na">leakConductance=</span><span class="s">&quot;50pS&quot;</span><span class="w"> </span><span class="na">refractoryPeriod=</span><span class="s">&quot;4ms&quot;</span><span class="w"> </span><span class="na">capacitance=</span><span class="s">&quot;1pF&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Finally a simulation element says what component is to be run and for how long.
It also contains an embedded display element so the results of the simulation can be visualized.
These are also user-defined types: their definitions will be presented in example 6.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Simulation</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;80ms&quot;</span><span class="w"> </span><span class="na">step=</span><span class="s">&quot;0.05ms&quot;</span><span class="w"> </span><span class="na">target=</span><span class="s">&quot;hhcell_1&quot;</span><span class="nt">&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;Display</span><span class="w"> </span><span class="na">unit=</span><span class="s">&quot;ms&quot;</span><span class="nt">&gt;</span><span class="w">         </span>
<span class="w">      </span><span class="nt">&lt;Line</span><span class="w"> </span><span class="na">quantity=</span><span class="s">&quot;v&quot;</span><span class="w"> </span><span class="na">unit=</span><span class="s">&quot;mV&quot;</span><span class="w"> </span><span class="na">color=</span><span class="s">&quot;#0000f0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w">     </span>
<span class="w">   </span><span class="nt">&lt;/Display&gt;</span>
<span class="nt">&lt;/Simulation&gt;</span>
</pre></div>
</div>
<p>Thats it. When this model is run it produces the figure shown below (after rescaling a bit).</p>
<figure class="align-center" id="id1">
<img alt="LEMS GUI showing simulation output graphs" src="../_images/lems_example4.png" />
<figcaption>
<p><span class="caption-number">Fig. 53 </span><span class="caption-text">LEMS GUI showing simulation output graphs</span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "NeuroML/Documentation",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Userdocs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="LEMSOverview.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Model structure overview</p>
      </div>
    </a>
    <a class="right-next"
       href="LEMSExample2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Example 2: tidying up example 1</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By NeuroML contributors
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>