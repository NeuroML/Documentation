
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Simulating a multi compartment OLM neuron &#8212; NeuroML Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/zcustom.css?v=f191df08" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Userdocs/MultiCompartmentOLMexample';</script>
    <script src="../_static/search_boxes.js?v=5dfd38c8"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Interactive multi-compartment OLM cell example" href="NML2_examples/OLM.html" />
    <link rel="prev" title="Interactive single compartment HH example" href="NML2_examples/HH_single_compartment.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../Landing.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="NeuroML Documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="NeuroML Documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="MissionAndAims.html">Mission and Aims</a></li>
<li class="toctree-l1"><a class="reference internal" href="Usage.html">How to use this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="GetNeuroML.html">Get NeuroML</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="GettingStarted.html">Getting started with NeuroML</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="SingleNeuronExample.html">Simulating a regular spiking Izhikevich neuron</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/SingleNeuron.html">Interactive single Izhikevich neuron NeuroML example</a></li>
<li class="toctree-l2"><a class="reference internal" href="IzhikevichNetworkExample.html">A two population network of regular spiking Izhikevich neurons</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/IzhikevichNetwork.html">Interactive two population network example</a></li>
<li class="toctree-l2"><a class="reference internal" href="SingleCompartmentHHExample.html">Simulating a single compartment Hodgkin-Huxley neuron</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/HH_single_compartment.html">Interactive single compartment HH example</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Simulating a multi compartment OLM neuron</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/OLM.html">Interactive multi-compartment OLM cell example</a></li>
<li class="toctree-l2"><a class="reference internal" href="NML2_examples/NeuroML-DB.html">Create novel NeuroML models from components on NeuroML-DB</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="FindingNeuroMLModels.html">Finding and sharing NeuroML models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="CreatingNeuroMLModels.html">Creating NeuroML models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="ConvertingModels.html">Converting models to NeuroML and sharing them on Open Source Brain</a></li>
<li class="toctree-l2"><a class="reference internal" href="ImportingMorphologyFiles.html">Handling Morphology Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5.html">HDF5 support</a></li>
<li class="toctree-l2"><a class="reference internal" href="Provenance.html">Maintaining provenance in NeuroML models</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="ValidatingNeuroMLModels.html">Validating NeuroML Models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="VisualisingNeuroMLModels.html">Visualising NeuroML Models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="VisualisingChannels.html">Visualising and analysing ion channel models</a></li>
<li class="toctree-l2"><a class="reference internal" href="VisualisingCells.html">Visualising and analysing cell models</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="SimulatingNeuroMLModels.html">Simulating NeuroML Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="OptimisingNeuroMLModels.html">Optimising/fitting NeuroML Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="TestingNeuroMLModels.html">Testing/validating NeuroML Models</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="LEMS.html">LEMS: Low Entropy Model Specification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="LEMSOverview.html">Model structure overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample1.html">Example 1: Dimensions, Units, ComponentTypes and Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample2.html">Example 2: tidying up example 1</a></li>


<li class="toctree-l2"><a class="reference internal" href="LEMSExample3.html">Example 3: Connection dependent synaptic components</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample4.html">Example 4: Kinetic schemes</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample5.html">Example 5: References and paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample6.html">Example 6: User defined types for simulation and display</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample7.html">Example 7: User defined types for networks and populations</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSExample8.html">Example 8: Regimes in Dynamics definitions</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Specification.html">Schema/Specification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="NeuroMLv2.html">NeuroML v2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="Schemas/NeuroMLDocument.html">NeuroMLDocument</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/NeuroMLCoreDimensions.html">NeuroMLCoreDimensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/NeuroMLCoreCompTypes.html">NeuroMLCoreCompTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Cells.html">Cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Channels.html">Channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Synapses.html">Synapses</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Inputs.html">Inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Networks.html">Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/PyNN.html">PyNN</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Simulation.html">Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Schemas/Index.html">Index</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="NeuroMLv1.html">NeuroML v1</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="LEMSSchema.html">LEMS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Modelstructure.html">Model structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Unitsanddimensions.html">Units and dimensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Definingcomponenttypes.html">Defining component types</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Dynamics.html">Dynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Structure.html">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Simulation.html">Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Procedure.html">Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/DefiningComponents.html">Defining Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="LEMS_elements/Geometry.html">Geometry</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="NeuroMLv2AndLEMS.html">NeuroML 2 and LEMS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="UnitsAndDimensions.html">Units and dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Paths.html">Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuantitiesAndRecording.html">Quantities and recording</a></li>
<li class="toctree-l2"><a class="reference internal" href="LEMSSimulation.html">LEMS Simulation files</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="ExtendingNeuroMLv2.html">Extending NeuroML</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Software/Software.html">Software and Tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Software/pyNeuroML.html">pyNeuroML</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/libNeuroML.html">libNeuroML</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/pyLEMS.html">pyLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/NeuroMLlite.html">NeuroMLlite</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/jNeuroML.html">jNeuroML</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/jLEMS.html">jLEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/NeuroML_API.html">NeuroML C++ API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Software/MatLab.html">MatLab NeuroML Toolbox</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="Software/SupportingTools.html">Tools and resources with NeuroML support</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/Approaches.html">Approaches to adding NeuroML support</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/NEURON.html">NEURON and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/NetPyNE.html">NetPyNE and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/PyNN.html">PyNN and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/Brian.html">Brian and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/MOOSE.html">MOOSE and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/EDEN.html">EDEN and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/Arbor.html">Arbor and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/N2A.html">N2A and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/NEST.html">NEST and NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software/Tools/SWC.html">SWC and NeuroML</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="Publications.html">Citing NeuroML and related publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently asked questions (FAQ)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="Walkthroughs/Walkthroughs.html">Walk throughs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="Walkthroughs/RayEtAl2020/RayEtAl2020.html">Converting Ray et al 2020 to NeuroML</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="Walkthroughs/RayEtAl2020/Setup.html">Setting up</a></li>
<li class="toctree-l3"><a class="reference internal" href="Walkthroughs/RayEtAl2020/Conversion.html">Converting to NeuroML</a></li>
<li class="toctree-l3"><a class="reference internal" href="Walkthroughs/RayEtAl2020/OMV.html">Adding OMV tests</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">NeuroML events</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Events/Events.html">NeuroML outreach and events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202407-CNS2024.html">July 2024: NeuroML tutorial at CNS 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202404-Harmony.html">April 2024: NeuroML hackathon at HARMONY 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/20220630-CNS2022.html">June 2022: NeuroML tutorial at CNS*2022 satellite tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202204-Harmony.html">April 2022: NeuroML development workshop at HARMONY 2022</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202109-COMBINE.html">October 2021: NeuroML development workshop at COMBINE meeting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202108-INCF-Training-Week.html">August 2021: NeuroML tutorial at INCF Training Weeks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202107-CNS2021.html">July 2021: NeuroML tutorial at CNS*2021</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/202103-Harmony.html">March 2021: NeuroML hackathon at HARMONY 2021</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/2012-Edinburgh.html">March 2012: Fourth NeuroML Development Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Events/PastEvents.html">Past NeuroML Events</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The NeuroML Initiative</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/CommunicationChannels.html">Getting in touch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Standards.html">Overview of standards in neuroscience</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/History.html">A brief history of NeuroML</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../NeuroMLOrg/Board.html">NeuroML Editorial Board</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../NeuroMLOrg/BoardHistory.html">History of the NeuroML Editorial Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NeuroMLOrg/BoardMeetingReports.html">Workshop and Meeting reports</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/ScientificCommittee.html">NeuroML Scientific Committee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Funding.html">Funding and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/OutreachTraining.html">Outreach and training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Contributors.html">NeuroML contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/Repositories.html">NeuroML repositories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NeuroMLOrg/CoC.html">Code of Conduct</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Devdocs/Devdocs.html">Overview</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Devdocs/DevSOP.html">Contribution guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Devdocs/ReleaseProcess.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Devdocs/UpdatingStandard.html">Making changes to the NeuroML standard</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../Devdocs/InteractionOtherBits.html">Interaction with other languages and standards</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Reference/Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Reference/zBibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NeuroML/Documentation" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NeuroML/Documentation/edit/main/source/Userdocs/MultiCompartmentOLMexample.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NeuroML/Documentation/issues/new?title=Issue%20on%20page%20%2FUserdocs/MultiCompartmentOLMexample.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Userdocs/MultiCompartmentOLMexample.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Simulating a multi compartment OLM neuron</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-model-in-neuroml">Declaring the model in NeuroML</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-cell">Declaring the cell</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-network">Declaring the network</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-generated-neuroml-model">The generated NeuroML model</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-the-model">Simulating the model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-the-recorded-variables">Plotting the recorded variables</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="simulating-a-multi-compartment-olm-neuron">
<span id="userdocs-getting-started-multi-compartment-example"></span><h1>Simulating a multi compartment OLM neuron<a class="headerlink" href="#simulating-a-multi-compartment-olm-neuron" title="Link to this heading">#</a></h1>
<p>In this section we will model and simulate a multi-compartment Oriens-lacunosum moleculare (OLM) interneuron cell from the rodent hippocampal CA1 network model developed by Bezaire et al. (<span id="id1">[<a class="reference internal" href="../Reference/zBibliography.html#id15" title="Marianne J Bezaire, Ivan Raikov, Kelly Burk, Dhrumil Vyas, and Ivan Soltesz. Interneuronal mechanisms of hippocampal theta oscillations in a full-scale model of the rodent ca1 circuit. eLife, 5:e18566, dec 2016. URL: https://doi.org/10.7554/eLife.18566, doi:10.7554/eLife.18566.">BRB+16</a>]</span>).
The complete network model can be seen <a class="reference external" href="https://github.com/mbezaire/ca1">here on GitHub</a>, and <a class="reference external" href="https://www.opensourcebrain.org/projects/nc_ca1">here on Open Source Brain</a>.</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/olm.cell.xy.png"><img alt="Morphology of constructed OLM cell in xy plane" src="../_images/olm.cell.xy.png" style="width: 50%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 22 </span><span class="caption-text">Morphology of OLM cell in xy plane</span><a class="headerlink" href="#id3" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../_images/olm_example_sim_seg0_soma0-v.png"><img alt="Membrane potential for neuron recorded from the simulation at the soma" src="../_images/olm_example_sim_seg0_soma0-v.png" style="width: 50%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 23 </span><span class="caption-text">Membrane potential of the simulated OLM cell at the soma.</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>This plot, saved as <code class="docutils literal notranslate"><span class="pre">olm_example_sim_seg0_soma0-v.png</span></code> is generated using the following Python NeuroML script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Multi-compartmental OLM cell example</span>

<span class="sd">File: olm-example.py</span>

<span class="sd">Copyright 2023 NeuroML contributors</span>
<span class="sd">Authors: Padraig Gleeson, Ankur Sinha</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">neuroml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">neuroml</span><span class="w"> </span><span class="kn">import</span> <span class="n">NeuroMLDocument</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">neuroml.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">component_factory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyneuroml</span><span class="w"> </span><span class="kn">import</span> <span class="n">pynml</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyneuroml.lems</span><span class="w"> </span><span class="kn">import</span> <span class="n">LEMSSimulation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyneuroml.plot.PlotMorphology</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot_2D</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main function</span>

<span class="sd">    Include the NeuroML model into a LEMS simulation file, run it, plot some</span>
<span class="sd">    data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simulation bits</span>
    <span class="n">sim_id</span> <span class="o">=</span> <span class="s2">&quot;olm_example_sim&quot;</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">LEMSSimulation</span><span class="p">(</span><span class="n">sim_id</span><span class="o">=</span><span class="n">sim_id</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">simulation_seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
    <span class="c1"># Include the NeuroML model file</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">include_neuroml2_file</span><span class="p">(</span><span class="n">create_olm_network</span><span class="p">())</span>
    <span class="c1"># Assign target for the simulation</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">assign_simulation_target</span><span class="p">(</span><span class="s2">&quot;single_olm_cell_network&quot;</span><span class="p">)</span>

    <span class="c1"># Recording information from the simulation</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">create_output_file</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;.dat&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span> <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0[0]/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_soma_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/0/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_soma_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/1/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_axon_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/2/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_axon_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/3/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_dend_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/4/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_dend_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/6/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_dend_1&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/5/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_dend_1&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/7/v&quot;</span><span class="p">)</span>
    <span class="c1"># Save LEMS simulation to file</span>
    <span class="n">sim_file</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">()</span>

    <span class="c1"># Run the simulation using the NEURON simulator</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">run_lems_with_jneuroml_neuron</span><span class="p">(</span><span class="n">sim_file</span><span class="p">,</span> <span class="n">max_memory</span><span class="o">=</span><span class="s2">&quot;2G&quot;</span><span class="p">,</span> <span class="n">nogui</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip_run</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Plot the data</span>
    <span class="n">plot_data</span><span class="p">(</span><span class="n">sim_id</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">plot_data</span><span class="p">(</span><span class="n">sim_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plot the sim data.</span>

<span class="sd">    Load the data from the file and plot the graph for the membrane potential</span>
<span class="sd">    using the pynml generate_plot utility function.</span>

<span class="sd">    :sim_id: ID of simulaton</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;.dat&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (soma seg 0)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg0_soma0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (soma seg 1)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg1_soma0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (axon seg 0)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg0_axon0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (axon seg 1)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg1_axon0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_olm_network</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the network</span>

<span class="sd">    :returns: name of network nml file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">net_doc</span> <span class="o">=</span> <span class="n">NeuroMLDocument</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;network&quot;</span><span class="p">,</span>
                              <span class="n">notes</span><span class="o">=</span><span class="s2">&quot;OLM cell network&quot;</span><span class="p">)</span>
    <span class="n">net_doc_fn</span> <span class="o">=</span> <span class="s2">&quot;olm_example_net.nml&quot;</span>
    <span class="n">net_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;IncludeType&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="n">create_olm_cell</span><span class="p">())</span>
    <span class="n">net</span> <span class="o">=</span> <span class="n">net_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Network&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;single_olm_cell_network&quot;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Create a population: convenient to create many cells of the same type</span>
    <span class="n">pop</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Population&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;pop0&quot;</span><span class="p">,</span> <span class="n">notes</span><span class="o">=</span><span class="s2">&quot;A population for our cell&quot;</span><span class="p">,</span>
                  <span class="n">component</span><span class="o">=</span><span class="s2">&quot;olm&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;populationList&quot;</span><span class="p">,</span>
                  <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Instance&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">component_factory</span><span class="p">(</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">0.</span><span class="p">))</span>
    <span class="c1"># Input</span>
    <span class="n">net_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;PulseGenerator&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;pg_olm&quot;</span><span class="p">,</span> <span class="n">notes</span><span class="o">=</span><span class="s2">&quot;Simple pulse generator&quot;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="s2">&quot;100ms&quot;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="s2">&quot;100ms&quot;</span><span class="p">,</span> <span class="n">amplitude</span><span class="o">=</span><span class="s2">&quot;0.08nA&quot;</span><span class="p">)</span>

    <span class="n">net</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;ExplicitInput&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;pop0[0]&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s2">&quot;pg_olm&quot;</span><span class="p">)</span>

    <span class="n">pynml</span><span class="o">.</span><span class="n">write_neuroml2_file</span><span class="p">(</span><span class="n">nml2_doc</span><span class="o">=</span><span class="n">net_doc</span><span class="p">,</span> <span class="n">nml2_file_name</span><span class="o">=</span><span class="n">net_doc_fn</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">net_doc_fn</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create_olm_cell</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the complete cell.</span>

<span class="sd">    :returns: cell object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nml_cell_doc</span> <span class="o">=</span> <span class="n">component_factory</span><span class="p">(</span><span class="s2">&quot;NeuroMLDocument&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;oml_cell&quot;</span><span class="p">)</span>
    <span class="n">cell</span> <span class="o">=</span> <span class="n">nml_cell_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Cell&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;olm&quot;</span><span class="p">,</span> <span class="n">neuro_lex_id</span><span class="o">=</span><span class="s2">&quot;NLXCELL:091206&quot;</span><span class="p">)</span>  <span class="c1"># type neuroml.Cell</span>
    <span class="n">nml_cell_file</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="s2">&quot;.cell.nml&quot;</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">morphology</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Add two soma segments to an unbranched segment group</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segment_group</span><span class="p">(</span><span class="s2">&quot;soma_0&quot;</span><span class="p">)</span>
    <span class="n">diam</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="n">soma_0</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span>
        <span class="n">prox</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">dist</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Seg0_soma_0&quot;</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;soma&quot;</span>
    <span class="p">)</span>

    <span class="n">soma_1</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span>
        <span class="n">prox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">dist</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">+</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Seg1_soma_0&quot;</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;soma&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Add axon segments</span>
    <span class="n">diam</span> <span class="o">=</span> <span class="mf">1.5</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">75</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_0</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;axon&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Add 2 dendrite segments, using the branching utility function</span>

    <span class="n">diam</span> <span class="o">=</span> <span class="mf">3.0</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">177</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_1</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dend_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span>
    <span class="p">)</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mi">177</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_1</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dend_1&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span>
    <span class="p">)</span>

    <span class="c1"># color groups for morphology plots</span>
    <span class="n">den_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="n">den_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0.8 0 0&quot;</span><span class="p">)</span>

    <span class="n">ax_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
    <span class="n">ax_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0 0.8 0&quot;</span><span class="p">)</span>

    <span class="n">soma_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="n">soma_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0 0 0.8&quot;</span><span class="p">)</span>

    <span class="c1"># Other cell properties</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_init_memb_potential</span><span class="p">(</span><span class="s2">&quot;-67mV&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_resistivity</span><span class="p">(</span><span class="s2">&quot;0.15 kohm_cm&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_specific_capacitance</span><span class="p">(</span><span class="s2">&quot;1.3 uF_per_cm2&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_spike_thresh</span><span class="p">(</span><span class="s2">&quot;-20 mV&quot;</span><span class="p">)</span>

    <span class="c1"># channels</span>
    <span class="c1"># leak</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;leak_all&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;0.01 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;leak_chan&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/leak_chan.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-67mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;non_specific&quot;</span><span class="p">)</span>
    <span class="c1"># HCNolm_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;HCNolm_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;0.5 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;HCNolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/HCNolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-32.9mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;73.37 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;105.8 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_axon</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_axon&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;117.392 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
    <span class="c1"># KvAolm_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;KvAolm_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;4.95 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;KvAolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># KvAolm_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;KvAolm_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;2.8 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;KvAolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;10.7 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;23.4 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_axon</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_axon&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;17.12 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">optimise_segment_groups</span><span class="p">()</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">write_neuroml2_file</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span> <span class="n">nml_cell_file</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plot_2D</span><span class="p">(</span><span class="n">nml_cell_file</span><span class="p">,</span> <span class="n">plane2d</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span> <span class="n">nogui</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">save_to_file</span><span class="o">=</span><span class="s2">&quot;olm.cell.xy.png&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nml_cell_file</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<section id="declaring-the-model-in-neuroml">
<h2>Declaring the model in NeuroML<a class="headerlink" href="#declaring-the-model-in-neuroml" title="Link to this heading">#</a></h2>
<p>Similar to previous examples, we will first declare the model, visualise it, and then simulate it.
The OLM model is slightly more complex than the HH neuron model we had worked with in the <a class="reference internal" href="SingleCompartmentHHExample.html#userdocs-getting-started-single-compartment-example"><span class="std std-ref">previous tutorial</span></a> since it includes multiple compartments.
However, where we had declared the ion-channels ourselves in the previous example, here will will not do so.
We will <em>include</em> channels that have been pre-defined in NeuroML to demonstrate how components defined in NeuroML can be easily re-used in models.</p>
<p>We will follow the same method as before.
We will first define the cell, create a network with one instance of the cell, and then simulate it to record and plot the membrane potential from different segments.</p>
<section id="declaring-the-cell">
<h3>Declaring the cell<a class="headerlink" href="#declaring-the-cell" title="Link to this heading">#</a></h3>
<p>To keep our Python script modularised, we start constructing our <a class="reference internal" href="Schemas/Cells.html#schema-cell"><span class="std std-ref">cell</span></a> in a separate function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_olm_cell</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the complete cell.</span>

<span class="sd">    :returns: cell object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nml_cell_doc</span> <span class="o">=</span> <span class="n">component_factory</span><span class="p">(</span><span class="s2">&quot;NeuroMLDocument&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;oml_cell&quot;</span><span class="p">)</span>
    <span class="n">cell</span> <span class="o">=</span> <span class="n">nml_cell_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Cell&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;olm&quot;</span><span class="p">,</span> <span class="n">neuro_lex_id</span><span class="o">=</span><span class="s2">&quot;NLXCELL:091206&quot;</span><span class="p">)</span>  <span class="c1"># type neuroml.Cell</span>
    <span class="n">nml_cell_file</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="s2">&quot;.cell.nml&quot;</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">morphology</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Add two soma segments to an unbranched segment group</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segment_group</span><span class="p">(</span><span class="s2">&quot;soma_0&quot;</span><span class="p">)</span>
    <span class="n">diam</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="n">soma_0</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span>
        <span class="n">prox</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">dist</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Seg0_soma_0&quot;</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;soma&quot;</span>
    <span class="p">)</span>

    <span class="n">soma_1</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span>
        <span class="n">prox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">dist</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">+</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Seg1_soma_0&quot;</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;soma&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Add axon segments</span>
    <span class="n">diam</span> <span class="o">=</span> <span class="mf">1.5</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">75</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_0</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;axon&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Add 2 dendrite segments, using the branching utility function</span>

    <span class="n">diam</span> <span class="o">=</span> <span class="mf">3.0</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">177</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_1</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dend_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span>
    <span class="p">)</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mi">177</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_1</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dend_1&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span>
    <span class="p">)</span>

    <span class="c1"># color groups for morphology plots</span>
    <span class="n">den_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="n">den_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0.8 0 0&quot;</span><span class="p">)</span>

    <span class="n">ax_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
    <span class="n">ax_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0 0.8 0&quot;</span><span class="p">)</span>

    <span class="n">soma_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="n">soma_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0 0 0.8&quot;</span><span class="p">)</span>

    <span class="c1"># Other cell properties</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_init_memb_potential</span><span class="p">(</span><span class="s2">&quot;-67mV&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_resistivity</span><span class="p">(</span><span class="s2">&quot;0.15 kohm_cm&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_specific_capacitance</span><span class="p">(</span><span class="s2">&quot;1.3 uF_per_cm2&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_spike_thresh</span><span class="p">(</span><span class="s2">&quot;-20 mV&quot;</span><span class="p">)</span>

    <span class="c1"># channels</span>
    <span class="c1"># leak</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;leak_all&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;0.01 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;leak_chan&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/leak_chan.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-67mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;non_specific&quot;</span><span class="p">)</span>
    <span class="c1"># HCNolm_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;HCNolm_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;0.5 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;HCNolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/HCNolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-32.9mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;73.37 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;105.8 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_axon</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_axon&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;117.392 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
    <span class="c1"># KvAolm_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;KvAolm_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;4.95 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;KvAolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># KvAolm_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;KvAolm_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;2.8 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;KvAolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;10.7 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;23.4 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_axon</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_axon&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;17.12 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let us walk through this function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">nml_cell_doc</span> <span class="o">=</span> <span class="n">component_factory</span><span class="p">(</span><span class="s2">&quot;NeuroMLDocument&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;oml_cell&quot;</span><span class="p">)</span>
    <span class="n">cell</span> <span class="o">=</span> <span class="n">nml_cell_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Cell&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;olm&quot;</span><span class="p">,</span> <span class="n">neuro_lex_id</span><span class="o">=</span><span class="s2">&quot;NLXCELL:091206&quot;</span><span class="p">)</span>  <span class="c1"># type neuroml.Cell</span>
    <span class="n">nml_cell_file</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="s2">&quot;.cell.nml&quot;</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">morphology</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

</pre></div>
</div>
<p>We create a new model document that will hold the cell model.
Then, we create and add a new <a class="reference internal" href="Schemas/Cells.html#schema-cell"><span class="std std-ref">Cell</span></a> using the <code class="docutils literal notranslate"><span class="pre">add</span></code> method to the document.
We also provide a <code class="docutils literal notranslate"><span class="pre">neuro_lex_id</span></code> here, which is the <a class="reference external" href="https://scicrunch.org/scicrunch/interlex/view/ilx_0105030?searchTerm=oriens-lacunosum%20moleculare">NeuroLex ontology identifier</a>.
This allows us to better connect models to biological concepts.</p>
<p>As we have seen in the <a class="reference internal" href="SingleNeuronExample.html#userdocs-getting-started-single-example-supplementary-add"><span class="std std-ref">single Izhikevich neuron example</span></a>, the <code class="docutils literal notranslate"><span class="pre">add</span></code> method calls the <code class="docutils literal notranslate"><span class="pre">component_factory</span></code> to create the component object for us.
For the <code class="docutils literal notranslate"><span class="pre">Cell</span></code> component type, it does a number of extra things for us to set up, or initialise, the cell.</p>
<p>We have a number of ways of inspecting the cell.
The <code class="docutils literal notranslate"><span class="pre">summary</span></code> function provides a very short summary of the cell.
This is useful to quickly get a high level overview of it:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cell</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="go">*******************************************************</span>
<span class="go">* Cell: olm</span>
<span class="go">* Notes: None</span>
<span class="go">* Segments: 0</span>
<span class="go">* SegmentGroups: 4</span>
<span class="go">*******************************************************</span>
</pre></div>
</div>
<p>We can also use the general <a class="reference internal" href="SingleNeuronExample.html#userdocs-getting-started-single-example-supplementary-info"><span class="std std-ref">info function</span></a> to inspect the cell:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cell</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Cell -- Cell with  **segment** s specified in a  **morphology**  element along with details on its  **biophysicalProperties** . NOTE: this can only be correctly simulated using jLEMS when there is a single segment in the cell, and **v**  of this cell represents the membrane potential in that isopotential segment.</span>

<span class="go">Please see the NeuroML standard schema documentation at https://docs.neuroml.org/Userdocs/NeuroMLv2.html for more information.</span>

<span class="go">Valid members for Cell are:</span>
<span class="go">* biophysical_properties_attr (class: NmlId, Optional)</span>
<span class="go">* morphology (class: Morphology, Optional)</span>
<span class="go">        * Contents (&#39;ids&#39;/&lt;objects&gt;): &#39;morphology&#39;</span>

<span class="go">* neuro_lex_id (class: NeuroLexId, Optional)</span>
<span class="go">        * Contents (&#39;ids&#39;/&lt;objects&gt;): NLXCELL:091206</span>

<span class="go">* metaid (class: MetaId, Optional)</span>
<span class="go">* biophysical_properties (class: BiophysicalProperties, Optional)</span>
<span class="go">        * Contents (&#39;ids&#39;/&lt;objects&gt;): &#39;biophys&#39;</span>

<span class="go">* id (class: NmlId, Required)</span>
<span class="go">        * Contents (&#39;ids&#39;/&lt;objects&gt;): olm</span>

<span class="go">* notes (class: xs:string, Optional)</span>
<span class="go">* properties (class: Property, Optional)</span>
<span class="go">* annotation (class: Annotation, Optional)</span>
<span class="go">* morphology_attr (class: NmlId, Optional)</span>

</pre></div>
</div>
<p>We see the cell already contains <code class="docutils literal notranslate"><span class="pre">biophysical_properties</span></code> or <code class="docutils literal notranslate"><span class="pre">morphology</span></code>.
Because these are components of the cell that are expected to be used, these were added automatically for us when the new component was created.</p>
<p>Let us take a look at the morphology of the cell:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cell</span><span class="o">.</span><span class="n">morphology</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">show_contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Morphology -- The collection of  **segment** s which specify the 3D structure of the cell, along with a number of  **segmentGroup** s</span>

<span class="go">Please see the NeuroML standard schema documentation at https://docs.neuroml.org/Userdocs/NeuroMLv2.html for more information.</span>

<span class="go">Valid members for Morphology are:</span>
<span class="go">* segments (class: Segment, Required)</span>
<span class="go">* metaid (class: MetaId, Optional)</span>
<span class="go">* segment_groups (class: SegmentGroup, Optional)</span>
<span class="go">        * Contents (&#39;ids&#39;/&lt;objects&gt;): [&#39;all&#39;, &#39;soma_group&#39;, &#39;axon_group&#39;, &#39;dendrite_group&#39;]</span>

<span class="go">* id (class: NmlId, Required)</span>
<span class="go">        * Contents (&#39;ids&#39;/&lt;objects&gt;): morphology</span>

<span class="go">* notes (class: xs:string, Optional)</span>
<span class="go">* properties (class: Property, Optional)</span>
<span class="go">* annotation (class: Annotation, Optional)</span>
</pre></div>
</div>
<p>We see that there are no segments in the cell because we have not added any.
However, there are already a number of “default” segment groups that were automatically added for us: <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">soma_group</span></code>, <code class="docutils literal notranslate"><span class="pre">axon_group</span></code>, <code class="docutils literal notranslate"><span class="pre">dendrite_group</span></code>.
These groups allow us to keep track of all the segments, and of the segments forming the soma, the axon, and the dendrites of the cell respectively.
Take a look at the <a class="reference internal" href="Conventions.html#userdocs-conventions-segments"><span class="std std-ref">conventions page</span></a> for more information on these.</p>
<p>We now have an empty cell.
Since we are building a multi-compartmental cell, we now proceed to define the detailed morphology of the cell.
We do this by adding <a class="reference internal" href="Schemas/Cells.html#schema-segment"><span class="std std-ref">segments</span></a> and grouping them in to <a class="reference internal" href="Schemas/Cells.html#schema-segmentgroup"><span class="std std-ref">segment groups</span></a>.
We can add segments using the <code class="docutils literal notranslate"><span class="pre">add_segment</span></code> utility function, as we do for the segments forming the soma.
Here, our soma has two segments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
    <span class="c1"># Add two soma segments to an unbranched segment group</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segment_group</span><span class="p">(</span><span class="s2">&quot;soma_0&quot;</span><span class="p">)</span>
    <span class="n">diam</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="n">soma_0</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span>
        <span class="n">prox</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">dist</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Seg0_soma_0&quot;</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;soma&quot;</span>
    <span class="p">)</span>

    <span class="n">soma_1</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span>
        <span class="n">prox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">dist</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.</span> <span class="o">+</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Seg1_soma_0&quot;</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;soma&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>The utility function takes the dimensions of the segment—it’s <a class="reference internal" href="Schemas/Cells.html#schema-proximal"><span class="std std-ref">proximal</span></a> and <a class="reference internal" href="Schemas/Cells.html#schema-distal"><span class="std std-ref">distal</span></a> co-ordinates and the diameter to create a segment of the provided name.
Additionally, since segments need to be contiguous, it makes the first segment the <em>parent</em> of the second, to build a chain.
Finally, it places the segment into the specified segment group and the default groups that we also have and adds the segment to the cell’s morphology.</p>
<p>Note that by default, the <code class="docutils literal notranslate"><span class="pre">add_segment</span></code> function does not know if the segments are contiguous, i.e., that they form an unbranched branch of the cell.
We could have added segments here that do not line up in a chain, when building different parts of a cell for example.
In this case, we know that the two soma segments must be contiguous, and that they are on the same unbranched branch (i.e. a continuous section without any branching points on it), so we create an unbranched segment group first using the <code class="docutils literal notranslate"><span class="pre">add_unbranched_segment_group</span></code>.</p>
<p>If we were only creating cell morphologies, this would not not matter much.
Even if the two segments were not included in a group of unbranched segments, they would still be connected.
However, for simulation, simulators such as NEURON need to know which parts of the cell form unbranched sections so that they can apply the <a class="reference external" href="https://en.wikipedia.org/wiki/Cable_theory#Deriving_the_cable_equation">cable equation</a> and break them into smaller segments to simulate the electric current through them.
(See <span id="id2">[<a class="reference internal" href="../Reference/zBibliography.html#id8" title="Sharon Crook, Padraig Gleeson, Fred Howell, Joseph Svitak, and R. Angus Silver. MorphML: level 1 of the NeuroML standards for neuronal morphology data and model specification. Neuroinformatics, 5(2):96–104, 5 2007. doi:10.1007/s12021-007-0003-6.">CGH+07</a>]</span> for more information on how different simulators simulate cells with detailed morphologies.)</p>
<p>Next, we can call the same functions multiple times to add soma, dendritic, and axonal segments to our cell but this can get quite lengthy.
To easily add unbranched contiguous lists of segments to the cell, we can directly use the <code class="docutils literal notranslate"><span class="pre">add_unbranched_segments</span></code> utility function.
Here we use it to create an axonal segment group, and two dendritic groups each with two segments.
The first point we provide is the proximal (starting) of the dendrite.
The next two points are the distal (ends) of each segment forming the section.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Add axon segments</span>
    <span class="n">diam</span> <span class="o">=</span> <span class="mf">1.5</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">75</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_0</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;axon&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Add 2 dendrite segments, using the branching utility function</span>

    <span class="n">diam</span> <span class="o">=</span> <span class="mf">3.0</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">177</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_1</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dend_0&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span>
    <span class="p">)</span>

    <span class="n">cell</span><span class="o">.</span><span class="n">add_unbranched_segments</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mi">177</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">diam</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">soma_1</span><span class="p">,</span>
        <span class="n">fraction_along</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dend_1&quot;</span><span class="p">,</span>
        <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>We repeat this process to create more dendritic and axonal sections of contiguous segments.</p>
<p>Finally, we add an extra colour property to the three primary segment groups that can be used when generating morphology graphs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># color groups for morphology plots</span>
    <span class="n">den_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="n">den_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0.8 0 0&quot;</span><span class="p">)</span>

    <span class="n">ax_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
    <span class="n">ax_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0 0.8 0&quot;</span><span class="p">)</span>

    <span class="n">soma_seg_group</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">get_segment_group</span><span class="p">(</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="n">soma_seg_group</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;0 0 0.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We have now completed adding the morphological information to our cell.
Next, we proceed to our <a class="reference internal" href="Schemas/Cells.html#schema-biophysicalproperties"><span class="std std-ref">biophysical properties</span></a>, e.g.:</p>
<ul class="simple">
<li><p>the <a class="reference internal" href="Schemas/Cells.html#schema-membraneproperties"><span class="std std-ref">membrane properties</span></a></p>
<ul>
<li><p><a class="reference internal" href="Schemas/Cells.html#schema-spikethresh"><span class="std std-ref">spike threshold</span></a></p></li>
<li><p><a class="reference internal" href="Schemas/Cells.html#schema-initmembpotential"><span class="std std-ref">initial membrane potential</span></a></p></li>
<li><p><a class="reference internal" href="Schemas/Cells.html#schema-basechanneldensity"><span class="std std-ref">channel densities</span></a></p></li>
<li><p><a class="reference internal" href="Schemas/Cells.html#schema-specificcapacitance"><span class="std std-ref">specifc capacitances</span></a></p></li>
</ul>
</li>
<li><p>the <a class="reference internal" href="Schemas/Cells.html#schema-intracellularproperties"><span class="std std-ref">intracellular properties</span></a></p>
<ul>
<li><p><a class="reference internal" href="Schemas/Cells.html#schema-resistivity"><span class="std std-ref">resistivity</span></a></p></li>
</ul>
</li>
</ul>
<p>We use more helpful utility functions to set these values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># Other cell properties</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_init_memb_potential</span><span class="p">(</span><span class="s2">&quot;-67mV&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_resistivity</span><span class="p">(</span><span class="s2">&quot;0.15 kohm_cm&quot;</span><span class="p">)</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">set_specific_capacitance</span><span class="p">(</span><span class="s2">&quot;1.3 uF_per_cm2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For setting channel densities, we have the <code class="docutils literal notranslate"><span class="pre">add_channel_density</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
    <span class="c1"># channels</span>
    <span class="c1"># leak</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;leak_all&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;0.01 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;leak_chan&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/leak_chan.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-67mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;non_specific&quot;</span><span class="p">)</span>
    <span class="c1"># HCNolm_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;HCNolm_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;0.5 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;HCNolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/HCNolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-32.9mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;73.37 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;105.8 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Kdrfast_axon</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Kdrfast_axon&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;117.392 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Kdrfast&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;axon_group&quot;</span><span class="p">)</span>
    <span class="c1"># KvAolm_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;KvAolm_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;4.95 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;KvAolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># KvAolm_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;KvAolm_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;2.8 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;KvAolm&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;-77mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_soma</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_soma&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;10.7 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;soma_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_dendrite</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_dendrite&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;23.4 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
                             <span class="n">group_id</span><span class="o">=</span><span class="s2">&quot;dendrite_group&quot;</span><span class="p">)</span>
    <span class="c1"># Nav_axon</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">add_channel_density</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span>
                             <span class="n">cd_id</span><span class="o">=</span><span class="s2">&quot;Nav_axon&quot;</span><span class="p">,</span>
                             <span class="n">cond_density</span><span class="o">=</span><span class="s2">&quot;17.12 mS_per_cm2&quot;</span><span class="p">,</span>
                             <span class="n">ion_channel</span><span class="o">=</span><span class="s2">&quot;Nav&quot;</span><span class="p">,</span>
                             <span class="n">ion_chan_def_file</span><span class="o">=</span><span class="s2">&quot;olm-example/Nav.channel.nml&quot;</span><span class="p">,</span>
                             <span class="n">erev</span><span class="o">=</span><span class="s2">&quot;50mV&quot;</span><span class="p">,</span>
                             <span class="n">ion</span><span class="o">=</span><span class="s2">&quot;na&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>Note that we are not writing our channel files from scratch here.
We are re-using already written NeuroML channel definitions by simply including their NeuroML definition files.</p>
<p>This completes the definition of our cell.
We now run the level one validation, write it to a file while also running a complete (level one and level two) validation using pyNeuroML.
We also generate the morphology plot shown on the top of this page.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
    <span class="n">cell</span><span class="o">.</span><span class="n">optimise_segment_groups</span><span class="p">()</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">write_neuroml2_file</span><span class="p">(</span><span class="n">nml_cell_doc</span><span class="p">,</span> <span class="n">nml_cell_file</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting NeuroML file is:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;neuroml</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.neuroml.org/schema/neuroml2&quot;</span><span class="w">  </span><span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="w"> </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.neuroml.org/schema/neuroml2 https://raw.github.com/NeuroML/NeuroML2/development/Schemas/NeuroML2/NeuroML_v2.3.1.xsd&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;oml_cell&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;olm-example/leak_chan.channel.nml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;olm-example/HCNolm.channel.nml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;olm-example/Kdrfast.channel.nml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;olm-example/KvAolm.channel.nml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;olm-example/Nav.channel.nml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;cell</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;olm&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;NLXCELL:091206&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;morphology</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;morphology&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg0_soma_0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;10.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;10.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;10.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg1_soma_0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;20.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;10.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg0_axon_0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">fractionAlong=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;1.5&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;-75.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;1.5&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg1_axon_0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;-75.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;1.5&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;-150.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;1.5&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg0_dend_0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;20.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;100.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;120.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg1_dend_0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;100.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;120.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;177.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;197.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;6&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg0_dend_1&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;20.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;-100.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;120.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segment</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;7&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Seg1_dend_1&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;6&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;proximal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;-100.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;120.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;distal</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;-177.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;197.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">diameter=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segment&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;soma_0&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;sao864921383&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;axon_0&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;sao864921383&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;dend_0&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;sao864921383&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;5&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;dend_1&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;sao864921383&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;6&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;member</span><span class="w"> </span><span class="na">segment=</span><span class="s">&quot;7&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;soma_group&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;GO:0043025&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;notes&gt;</span>Default<span class="w"> </span>soma<span class="w"> </span>segment<span class="w"> </span>group<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>cell<span class="nt">&lt;/notes&gt;</span>
<span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0 0 0.8&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;soma_0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;axon_group&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;GO:0030424&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;notes&gt;</span>Default<span class="w"> </span>axon<span class="w"> </span>segment<span class="w"> </span>group<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>cell<span class="nt">&lt;/notes&gt;</span>
<span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0 0.8 0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;axon_0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;dendrite_group&quot;</span><span class="w"> </span><span class="na">neuroLexId=</span><span class="s">&quot;GO:0030425&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;notes&gt;</span>Default<span class="w"> </span>dendrite<span class="w"> </span>segment<span class="w"> </span>group<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>cell<span class="nt">&lt;/notes&gt;</span>
<span class="w">                </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">tag=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.8 0 0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dend_0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dend_1&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">            </span><span class="nt">&lt;segmentGroup</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;all&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;notes&gt;</span>Default<span class="w"> </span>segment<span class="w"> </span>group<span class="w"> </span>for<span class="w"> </span>all<span class="w"> </span>segments<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>cell<span class="nt">&lt;/notes&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;axon_0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dend_0&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dend_1&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;soma_0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/segmentGroup&gt;</span>
<span class="w">        </span><span class="nt">&lt;/morphology&gt;</span>
<span class="w">        </span><span class="nt">&lt;biophysicalProperties</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;biophys&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;membraneProperties&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;leak_all&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;leak_chan&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;0.01 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-67mV&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;non_specific&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;HCNolm_soma&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;HCNolm&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;0.5 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-32.9mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;soma_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;h&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;Kdrfast_soma&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;Kdrfast&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;73.37 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;soma_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;k&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;Kdrfast_dendrite&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;Kdrfast&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;105.8 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dendrite_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;k&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;Kdrfast_axon&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;Kdrfast&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;117.392 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;axon_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;k&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;KvAolm_soma&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;KvAolm&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;4.95 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;soma_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;k&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;KvAolm_dendrite&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;KvAolm&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;2.8 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;-77mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dendrite_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;k&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;Nav_soma&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;Nav&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;10.7 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;soma_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;na&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;Nav_dendrite&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;Nav&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;23.4 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;dendrite_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;na&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;channelDensity</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;Nav_axon&quot;</span><span class="w"> </span><span class="na">ionChannel=</span><span class="s">&quot;Nav&quot;</span><span class="w"> </span><span class="na">condDensity=</span><span class="s">&quot;17.12 mS_per_cm2&quot;</span><span class="w"> </span><span class="na">erev=</span><span class="s">&quot;50mV&quot;</span><span class="w"> </span><span class="na">segmentGroup=</span><span class="s">&quot;axon_group&quot;</span><span class="w"> </span><span class="na">ion=</span><span class="s">&quot;na&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;spikeThresh</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-20 mV&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;specificCapacitance</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.3 uF_per_cm2&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;initMembPotential</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-67mV&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/membraneProperties&gt;</span>
<span class="w">            </span><span class="nt">&lt;intracellularProperties&gt;</span>
<span class="w">                </span><span class="nt">&lt;resistivity</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.15 kohm_cm&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/intracellularProperties&gt;</span>
<span class="w">        </span><span class="nt">&lt;/biophysicalProperties&gt;</span>
<span class="w">    </span><span class="nt">&lt;/cell&gt;</span>
<span class="nt">&lt;/neuroml&gt;</span>
</pre></div>
</div>
<p>We can now already inspect our cell using the NeuroML tools.
We have already generated the morphology plot in our script, but we can also do it using <code class="docutils literal notranslate"><span class="pre">pynml</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pynml -png olm.cell.png</span>
<span class="go">...</span>
<span class="go">pyNeuroML &gt;&gt;&gt; Writing to: /home/asinha/Documents/02_Code/00_mine/2020-OSB/NeuroML-Documentation/source/Userdocs/NML2_examples/olm.cell.png</span>
</pre></div>
</div>
<p>This gives us a figure of the morphology of our cell, similar to the one we’ve already generated:</p>
<figure class="align-center" id="id5">
<img alt="Figure showing the morphology of the OLM cell generated from the NeuroML definition." src="../_images/olm.cell.png" />
<figcaption>
<p><span class="caption-number">Fig. 24 </span><span class="caption-text">Figure showing the morphology of the OLM cell generated from the NeuroML definition.</span><a class="headerlink" href="#id5" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="declaring-the-network">
<h3>Declaring the network<a class="headerlink" href="#declaring-the-network" title="Link to this heading">#</a></h3>
<p>We now use our cell in a network.
Similar to our previous example, we are going to only create a network with one cell, and an <a class="reference internal" href="Schemas/Networks.html#schema-explicitinput"><span class="std std-ref">explicit input</span></a> to the cell:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_olm_network</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create the network</span>

<span class="sd">    :returns: name of network nml file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">net_doc</span> <span class="o">=</span> <span class="n">NeuroMLDocument</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;network&quot;</span><span class="p">,</span>
                              <span class="n">notes</span><span class="o">=</span><span class="s2">&quot;OLM cell network&quot;</span><span class="p">)</span>
    <span class="n">net_doc_fn</span> <span class="o">=</span> <span class="s2">&quot;olm_example_net.nml&quot;</span>
    <span class="n">net_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;IncludeType&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="n">create_olm_cell</span><span class="p">())</span>
    <span class="n">net</span> <span class="o">=</span> <span class="n">net_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Network&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;single_olm_cell_network&quot;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Create a population: convenient to create many cells of the same type</span>
    <span class="n">pop</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Population&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;pop0&quot;</span><span class="p">,</span> <span class="n">notes</span><span class="o">=</span><span class="s2">&quot;A population for our cell&quot;</span><span class="p">,</span>
                  <span class="n">component</span><span class="o">=</span><span class="s2">&quot;olm&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;populationList&quot;</span><span class="p">,</span>
                  <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Instance&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">component_factory</span><span class="p">(</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mf">0.</span><span class="p">))</span>
    <span class="c1"># Input</span>
    <span class="n">net_doc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;PulseGenerator&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;pg_olm&quot;</span><span class="p">,</span> <span class="n">notes</span><span class="o">=</span><span class="s2">&quot;Simple pulse generator&quot;</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="s2">&quot;100ms&quot;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="s2">&quot;100ms&quot;</span><span class="p">,</span> <span class="n">amplitude</span><span class="o">=</span><span class="s2">&quot;0.08nA&quot;</span><span class="p">)</span>

    <span class="n">net</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;ExplicitInput&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;pop0[0]&quot;</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s2">&quot;pg_olm&quot;</span><span class="p">)</span>

    <span class="n">pynml</span><span class="o">.</span><span class="n">write_neuroml2_file</span><span class="p">(</span><span class="n">nml2_doc</span><span class="o">=</span><span class="n">net_doc</span><span class="p">,</span> <span class="n">nml2_file_name</span><span class="o">=</span><span class="n">net_doc_fn</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">net_doc_fn</span>

</pre></div>
</div>
<p>We start in the same way, by creating a new NeuroML document and including our cell file into it.
We then create a <a class="reference internal" href="Schemas/Networks.html#schema-population"><span class="std std-ref">population</span></a> comprising of a single cell.
We create a <a class="reference internal" href="Schemas/Inputs.html#schema-pulsegenerator"><span class="std std-ref">pulse generator</span></a> as an <a class="reference internal" href="Schemas/Networks.html#schema-explicitinput"><span class="std std-ref">explicit input</span></a>, which targets our population.
Note that as the schema documentation for <code class="docutils literal notranslate"><span class="pre">ExplicitInput</span></code> notes, any current source (any component that <em>extends</em> <a class="reference internal" href="Schemas/Inputs.html#schema-basepointcurrent"><span class="std std-ref">basePointCurrent</span></a>) can be used as an <code class="docutils literal notranslate"><span class="pre">ExplicitInput</span></code>.</p>
<p>We add all of these to the <a class="reference internal" href="Schemas/Networks.html#schema-network"><span class="std std-ref">network</span></a> and save (and validate) our network file.
The NeuroML file generated is below:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;neuroml</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.neuroml.org/schema/neuroml2&quot;</span><span class="w">  </span><span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="w"> </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.neuroml.org/schema/neuroml2 https://raw.github.com/NeuroML/NeuroML2/development/Schemas/NeuroML2/NeuroML_v2.3.1.xsd&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;network&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;notes&gt;</span>OLM<span class="w"> </span>cell<span class="w"> </span>network<span class="nt">&lt;/notes&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;olm.cell.nml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;pulseGenerator</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;pg_olm&quot;</span><span class="w"> </span><span class="na">delay=</span><span class="s">&quot;100ms&quot;</span><span class="w"> </span><span class="na">duration=</span><span class="s">&quot;100ms&quot;</span><span class="w"> </span><span class="na">amplitude=</span><span class="s">&quot;0.08nA&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;notes&gt;</span>Simple<span class="w"> </span>pulse<span class="w"> </span>generator<span class="nt">&lt;/notes&gt;</span>
<span class="w">    </span><span class="nt">&lt;/pulseGenerator&gt;</span>
<span class="w">    </span><span class="nt">&lt;network</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;single_olm_cell_network&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;population</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;pop0&quot;</span><span class="w"> </span><span class="na">component=</span><span class="s">&quot;olm&quot;</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;populationList&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;notes&gt;</span>A<span class="w"> </span>population<span class="w"> </span>for<span class="w"> </span>our<span class="w"> </span>cell<span class="nt">&lt;/notes&gt;</span>
<span class="w">            </span><span class="nt">&lt;instance</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;location</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="na">z=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/instance&gt;</span>
<span class="w">        </span><span class="nt">&lt;/population&gt;</span>
<span class="w">        </span><span class="nt">&lt;explicitInput</span><span class="w"> </span><span class="na">target=</span><span class="s">&quot;pop0[0]&quot;</span><span class="w"> </span><span class="na">input=</span><span class="s">&quot;pg_olm&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/network&gt;</span>
<span class="nt">&lt;/neuroml&gt;</span>
</pre></div>
</div>
</section>
<section id="the-generated-neuroml-model">
<h3>The generated NeuroML model<a class="headerlink" href="#the-generated-neuroml-model" title="Link to this heading">#</a></h3>
<p>Before we look at simulating the model, we can inspect our model to check for correctness.
All our NeuroML files were validated when they were created already, so we do not need to run this step again.
However, if required, this can be easily done:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pynml -validate olm*nml</span>
</pre></div>
</div>
<p>Next, we can visualise our model using the information noted in the <a class="reference internal" href="VisualisingNeuroMLModels.html#userdocs-visualising-models"><span class="std std-ref">visualising NeuroML models</span></a> page (including the <code class="docutils literal notranslate"><span class="pre">-v</span></code> verbose option for more information on the cell):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pynml-summary olm_example_net.nml -v</span>
<span class="go">*******************************************************</span>
<span class="go">* NeuroMLDocument: network</span>
<span class="go">*</span>
<span class="go">*  ComponentType: [&#39;Bezaire_HCNolm_tau&#39;, &#39;Bezaire_Kdrfast_betaq&#39;, &#39;Bezaire_KvAolm_taub&#39;, &#39;Bezaire_Nav_alphah&#39;]</span>
<span class="go">*  IonChannel: [&#39;HCNolm&#39;, &#39;Kdrfast&#39;, &#39;KvAolm&#39;, &#39;Nav&#39;, &#39;leak_chan&#39;]</span>
<span class="go">*  PulseGenerator: [&#39;pg_olm&#39;]</span>
<span class="go">*</span>
<span class="go">*  Cell: olm</span>
<span class="go">*    &lt;Segment|0|Seg0_soma_0&gt;</span>
<span class="go">*      Parent segment: None (root segment)</span>
<span class="go">*      (0.0, 0.0, 0.0), diam 10.0um -&gt; (0.0, 10.0, 0.0), diam 10.0um; seg length: 10.0 um</span>
<span class="go">*      Surface area: 314.1592653589793 um2, volume: 785.3981633974482 um3</span>
<span class="go">*    &lt;Segment|1|Seg1_soma_0&gt;</span>
<span class="go">*      Parent segment: 0</span>
<span class="go">*      None -&gt; (0.0, 20.0, 0.0), diam 10.0um; seg length: 10.0 um</span>
<span class="go">*      Surface area: 314.1592653589793 um2, volume: 785.3981633974482 um3</span>
<span class="go">*    &lt;Segment|2|Seg0_axon_0&gt;</span>
<span class="go">*      Parent segment: 0</span>
<span class="go">*      (0.0, 0.0, 0.0), diam 1.5um -&gt; (0.0, -75.0, 0.0), diam 1.5um; seg length: 75.0 um</span>
<span class="go">*      Surface area: 353.4291735288517 um2, volume: 132.53594007331938 um3</span>
<span class="go">*    &lt;Segment|3|Seg1_axon_0&gt;</span>
<span class="go">*      Parent segment: 2</span>
<span class="go">*      None -&gt; (0.0, -150.0, 0.0), diam 1.5um; seg length: 75.0 um</span>
<span class="go">*      Surface area: 353.4291735288517 um2, volume: 132.53594007331938 um3</span>
<span class="go">*    &lt;Segment|4|Seg0_dend_0&gt;</span>
<span class="go">*      Parent segment: 1</span>
<span class="go">*      (0.0, 20.0, 0.0), diam 3.0um -&gt; (100.0, 120.0, 0.0), diam 3.0um; seg length: 141.4213562373095 um</span>
<span class="go">*      Surface area: 1332.8648814475098 um2, volume: 999.6486610856323 um3</span>
<span class="go">*    &lt;Segment|5|Seg1_dend_0&gt;</span>
<span class="go">*      Parent segment: 4</span>
<span class="go">*      None -&gt; (177.0, 197.0, 0.0), diam 3.0um; seg length: 108.89444430272832 um</span>
<span class="go">*      Surface area: 1026.3059587145826 um2, volume: 769.7294690359369 um3</span>
<span class="go">*    &lt;Segment|6|Seg0_dend_1&gt;</span>
<span class="go">*      Parent segment: 1</span>
<span class="go">*      (0.0, 20.0, 0.0), diam 3.0um -&gt; (-100.0, 120.0, 0.0), diam 3.0um; seg length: 141.4213562373095 um</span>
<span class="go">*      Surface area: 1332.8648814475098 um2, volume: 999.6486610856323 um3</span>
<span class="go">*    &lt;Segment|7|Seg1_dend_1&gt;</span>
<span class="go">*      Parent segment: 6</span>
<span class="go">*      None -&gt; (-177.0, 197.0, 0.0), diam 3.0um; seg length: 108.89444430272832 um</span>
<span class="go">*      Surface area: 1026.3059587145826 um2, volume: 769.7294690359369 um3</span>
<span class="go">*    Total length of 8 segments: 670.6316010800756 um; total area: 6053.518558099847 um2</span>
<span class="go">*</span>
<span class="go">*    SegmentGroup: all, 8 member(s),    0 included group(s);    contains 8 segments in total</span>
<span class="go">*    SegmentGroup: soma_group,  2 member(s),    1 included group(s);   contains 2 segments in total</span>
<span class="go">*    SegmentGroup: axon_group,  2 member(s),    1 included group(s);   contains 2 segments in total</span>
<span class="go">*    SegmentGroup: dendrite_group,      4 member(s),    2 included group(s);    contains 4 segments in total</span>
<span class="go">*    SegmentGroup: soma_0,      2 member(s),    0 included group(s);   contains 2 segments in total</span>
<span class="go">*    SegmentGroup: axon_0,      2 member(s),    0 included group(s);   contains 2 segments in total</span>
<span class="go">*    SegmentGroup: dend_0,      2 member(s),    0 included group(s);   contains 2 segments in total</span>
<span class="go">*    SegmentGroup: dend_1,      2 member(s),    0 included group(s);   contains 2 segments in total</span>
<span class="go">*</span>
<span class="go">*    Channel density: leak_all on all;  conductance of 0.01 mS_per_cm2 through ion chan leak_chan with ion non_specific, erev: -67mV</span>
<span class="go">*      Channel is on &lt;Segment|0|Seg0_soma_0&gt;,   total conductance: 0.1 S_per_m2 x 3.1415926535897934e-10 m2 = 3.1415926535897936e-11 S (31.41592653589794 pS)</span>
<span class="go">*      Channel is on &lt;Segment|1|Seg1_soma_0&gt;,   total conductance: 0.1 S_per_m2 x 3.1415926535897934e-10 m2 = 3.1415926535897936e-11 S (31.41592653589794 pS)</span>
<span class="go">*      Channel is on &lt;Segment|2|Seg0_axon_0&gt;,   total conductance: 0.1 S_per_m2 x 3.534291735288517e-10 m2 = 3.534291735288518e-11 S (35.34291735288518 pS)</span>
<span class="go">*      Channel is on &lt;Segment|3|Seg1_axon_0&gt;,   total conductance: 0.1 S_per_m2 x 3.534291735288517e-10 m2 = 3.534291735288518e-11 S (35.34291735288518 pS)</span>
<span class="go">*      Channel is on &lt;Segment|4|Seg0_dend_0&gt;,   total conductance: 0.1 S_per_m2 x 1.3328648814475097e-09 m2 = 1.3328648814475097e-10 S (133.28648814475096 pS)</span>
<span class="go">*      Channel is on &lt;Segment|5|Seg1_dend_0&gt;,   total conductance: 0.1 S_per_m2 x 1.0263059587145826e-09 m2 = 1.0263059587145826e-10 S (102.63059587145825 pS)</span>
<span class="go">*      Channel is on &lt;Segment|6|Seg0_dend_1&gt;,   total conductance: 0.1 S_per_m2 x 1.3328648814475097e-09 m2 = 1.3328648814475097e-10 S (133.28648814475096 pS)</span>
<span class="go">*      Channel is on &lt;Segment|7|Seg1_dend_1&gt;,   total conductance: 0.1 S_per_m2 x 1.0263059587145826e-09 m2 = 1.0263059587145826e-10 S (102.63059587145825 pS)</span>
<span class="go">*    Channel density: HCNolm_soma on soma_group;        conductance of 0.5 mS_per_cm2 through ion chan HCNolm with ion h, erev: -32.9mV</span>
<span class="go">*      Channel is on &lt;Segment|0|Seg0_soma_0&gt;,   total conductance: 5.0 S_per_m2 x 3.1415926535897934e-10 m2 = 1.5707963267948968e-09 S (1570.796326794897 pS)</span>
<span class="go">*      Channel is on &lt;Segment|1|Seg1_soma_0&gt;,   total conductance: 5.0 S_per_m2 x 3.1415926535897934e-10 m2 = 1.5707963267948968e-09 S (1570.796326794897 pS)</span>
<span class="go">*    Channel density: Kdrfast_soma on soma_group;       conductance of 73.37 mS_per_cm2 through ion chan Kdrfast with ion k, erev: -77mV</span>
<span class="go">*      Channel is on &lt;Segment|0|Seg0_soma_0&gt;,   total conductance: 733.7 S_per_m2 x 3.1415926535897934e-10 m2 = 2.3049865299388314e-07 S (230498.65299388315 pS)</span>
<span class="go">*      Channel is on &lt;Segment|1|Seg1_soma_0&gt;,   total conductance: 733.7 S_per_m2 x 3.1415926535897934e-10 m2 = 2.3049865299388314e-07 S (230498.65299388315 pS)</span>
<span class="go">*    Channel density: Kdrfast_dendrite on dendrite_group;       conductance of 105.8 mS_per_cm2 through ion chan Kdrfast with ion k, erev: -77mV</span>
<span class="go">*      Channel is on &lt;Segment|4|Seg0_dend_0&gt;,   total conductance: 1058.0 S_per_m2 x 1.3328648814475097e-09 m2 = 1.4101710445714652e-06 S (1410171.0445714653 pS)</span>
<span class="go">*      Channel is on &lt;Segment|5|Seg1_dend_0&gt;,   total conductance: 1058.0 S_per_m2 x 1.0263059587145826e-09 m2 = 1.0858317043200284e-06 S (1085831.7043200284 pS)</span>
<span class="go">*      Channel is on &lt;Segment|6|Seg0_dend_1&gt;,   total conductance: 1058.0 S_per_m2 x 1.3328648814475097e-09 m2 = 1.4101710445714652e-06 S (1410171.0445714653 pS)</span>
<span class="go">*      Channel is on &lt;Segment|7|Seg1_dend_1&gt;,   total conductance: 1058.0 S_per_m2 x 1.0263059587145826e-09 m2 = 1.0858317043200284e-06 S (1085831.7043200284 pS)</span>
<span class="go">*    Channel density: Kdrfast_axon on axon_group;       conductance of 117.392 mS_per_cm2 through ion chan Kdrfast with ion k, erev: -77mV</span>
<span class="go">*      Channel is on &lt;Segment|2|Seg0_axon_0&gt;,   total conductance: 1173.92 S_per_m2 x 3.534291735288517e-10 m2 = 4.1489757538898964e-07 S (414897.57538898964 pS)</span>
<span class="go">*      Channel is on &lt;Segment|3|Seg1_axon_0&gt;,   total conductance: 1173.92 S_per_m2 x 3.534291735288517e-10 m2 = 4.1489757538898964e-07 S (414897.57538898964 pS)</span>
<span class="go">*    Channel density: KvAolm_soma on soma_group;        conductance of 4.95 mS_per_cm2 through ion chan KvAolm with ion k, erev: -77mV</span>
<span class="go">*      Channel is on &lt;Segment|0|Seg0_soma_0&gt;,   total conductance: 49.5 S_per_m2 x 3.1415926535897934e-10 m2 = 1.5550883635269477e-08 S (15550.883635269476 pS)</span>
<span class="go">*      Channel is on &lt;Segment|1|Seg1_soma_0&gt;,   total conductance: 49.5 S_per_m2 x 3.1415926535897934e-10 m2 = 1.5550883635269477e-08 S (15550.883635269476 pS)</span>
<span class="go">*    Channel density: KvAolm_dendrite on dendrite_group;        conductance of 2.8 mS_per_cm2 through ion chan KvAolm with ion k, erev: -77mV</span>
<span class="go">*      Channel is on &lt;Segment|4|Seg0_dend_0&gt;,   total conductance: 28.0 S_per_m2 x 1.3328648814475097e-09 m2 = 3.7320216680530273e-08 S (37320.21668053028 pS)</span>
<span class="go">*      Channel is on &lt;Segment|5|Seg1_dend_0&gt;,   total conductance: 28.0 S_per_m2 x 1.0263059587145826e-09 m2 = 2.8736566844008313e-08 S (28736.566844008314 pS)</span>
<span class="go">*      Channel is on &lt;Segment|6|Seg0_dend_1&gt;,   total conductance: 28.0 S_per_m2 x 1.3328648814475097e-09 m2 = 3.7320216680530273e-08 S (37320.21668053028 pS)</span>
<span class="go">*      Channel is on &lt;Segment|7|Seg1_dend_1&gt;,   total conductance: 28.0 S_per_m2 x 1.0263059587145826e-09 m2 = 2.8736566844008313e-08 S (28736.566844008314 pS)</span>
<span class="go">*    Channel density: Nav_soma on soma_group;   conductance of 10.7 mS_per_cm2 through ion chan Nav with ion na, erev: 50mV</span>
<span class="go">*      Channel is on &lt;Segment|0|Seg0_soma_0&gt;,   total conductance: 107.0 S_per_m2 x 3.1415926535897934e-10 m2 = 3.361504139341079e-08 S (33615.04139341079 pS)</span>
<span class="go">*      Channel is on &lt;Segment|1|Seg1_soma_0&gt;,   total conductance: 107.0 S_per_m2 x 3.1415926535897934e-10 m2 = 3.361504139341079e-08 S (33615.04139341079 pS)</span>
<span class="go">*    Channel density: Nav_dendrite on dendrite_group;   conductance of 23.4 mS_per_cm2 through ion chan Nav with ion na, erev: 50mV</span>
<span class="go">*      Channel is on &lt;Segment|4|Seg0_dend_0&gt;,   total conductance: 234.0 S_per_m2 x 1.3328648814475097e-09 m2 = 3.118903822587173e-07 S (311890.3822587173 pS)</span>
<span class="go">*      Channel is on &lt;Segment|5|Seg1_dend_0&gt;,   total conductance: 234.0 S_per_m2 x 1.0263059587145826e-09 m2 = 2.401555943392123e-07 S (240155.59433921232 pS)</span>
<span class="go">*      Channel is on &lt;Segment|6|Seg0_dend_1&gt;,   total conductance: 234.0 S_per_m2 x 1.3328648814475097e-09 m2 = 3.118903822587173e-07 S (311890.3822587173 pS)</span>
<span class="go">*      Channel is on &lt;Segment|7|Seg1_dend_1&gt;,   total conductance: 234.0 S_per_m2 x 1.0263059587145826e-09 m2 = 2.401555943392123e-07 S (240155.59433921232 pS)</span>
<span class="go">*    Channel density: Nav_axon on axon_group;   conductance of 17.12 mS_per_cm2 through ion chan Nav with ion na, erev: 50mV</span>
<span class="go">*      Channel is on &lt;Segment|2|Seg0_axon_0&gt;,   total conductance: 171.20000000000002 S_per_m2 x 3.534291735288517e-10 m2 = 6.050707450813942e-08 S (60507.07450813943 pS)</span>
<span class="go">*      Channel is on &lt;Segment|3|Seg1_axon_0&gt;,   total conductance: 171.20000000000002 S_per_m2 x 3.534291735288517e-10 m2 = 6.050707450813942e-08 S (60507.07450813943 pS)</span>
<span class="go">*</span>
<span class="go">*    Specific capacitance on all: 1.3 uF_per_cm2</span>
<span class="go">*      Capacitance of &lt;Segment|0|Seg0_soma_0&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 3.1415926535897934e-10 m2 = 4.084070449666732e-12 F (4.084070449666732 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|1|Seg1_soma_0&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 3.1415926535897934e-10 m2 = 4.084070449666732e-12 F (4.084070449666732 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|2|Seg0_axon_0&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 3.534291735288517e-10 m2 = 4.594579255875073e-12 F (4.594579255875073 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|3|Seg1_axon_0&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 3.534291735288517e-10 m2 = 4.594579255875073e-12 F (4.594579255875073 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|4|Seg0_dend_0&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 1.3328648814475097e-09 m2 = 1.732724345881763e-11 F (17.32724345881763 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|5|Seg1_dend_0&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 1.0263059587145826e-09 m2 = 1.3341977463289574e-11 F (13.341977463289574 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|6|Seg0_dend_1&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 1.3328648814475097e-09 m2 = 1.732724345881763e-11 F (17.32724345881763 pF)</span>
<span class="go">*      Capacitance of &lt;Segment|7|Seg1_dend_1&gt;,  total capacitance: 0.013000000000000001 F_per_m2 x 1.0263059587145826e-09 m2 = 1.3341977463289574e-11 F (13.341977463289574 pF)</span>
<span class="go">*</span>
<span class="go">*  Network: single_olm_cell_network</span>
<span class="go">*</span>
<span class="go">*   1 cells in 1 populations</span>
<span class="go">*     Population: pop0 with 1 components of type olm</span>
<span class="go">*       Locations: [(0, 0, 0), ...]</span>
<span class="go">*</span>
<span class="go">*   0 connections in 0 projections</span>
<span class="go">*</span>
<span class="go">*   0 inputs in 0 input lists</span>
<span class="go">*</span>
<span class="go">*   1 explicit inputs (outside of input lists)</span>
<span class="go">*     Explicit Input of type pg_olm to pop0(cell 0), destination: unspecified</span>
<span class="go">*</span>
<span class="go">*******************************************************</span>
</pre></div>
</div>
<p>We can check the connectivity graph of the model:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pynml -graph 10 olm_example_net.nml</span>
</pre></div>
</div>
<p>which will give us this figure:</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../_images/single_olm_cell_network.gv.png"><img alt="Level 10 network graph generated by pynml" src="../_images/single_olm_cell_network.gv.png" style="width: 368.4px; height: 184.2px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 25 </span><span class="caption-text">Level 10 network graph generated by pynml</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="simulating-the-model">
<h2>Simulating the model<a class="headerlink" href="#simulating-the-model" title="Link to this heading">#</a></h2>
<p>Please note that this example uses the <a class="reference internal" href="Software/Tools/NEURON.html#userdocs-neuron"><span class="std std-ref">NEURON</span></a> simulator to simulate the model.
Please ensure that the <code class="docutils literal notranslate"><span class="pre">NEURON_HOME</span></code> environment variable is correctly set as noted <a class="reference internal" href="Software/Tools/NEURON.html#userdocs-neuron-envvar"><span class="std std-ref">here</span></a>.</p>
<p>Now that we have declared and inspected our network model and all its components, we can proceed to simulate it.
We do this in the <code class="docutils literal notranslate"><span class="pre">main</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main function</span>

<span class="sd">    Include the NeuroML model into a LEMS simulation file, run it, plot some</span>
<span class="sd">    data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simulation bits</span>
    <span class="n">sim_id</span> <span class="o">=</span> <span class="s2">&quot;olm_example_sim&quot;</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">LEMSSimulation</span><span class="p">(</span><span class="n">sim_id</span><span class="o">=</span><span class="n">sim_id</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">simulation_seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
    <span class="c1"># Include the NeuroML model file</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">include_neuroml2_file</span><span class="p">(</span><span class="n">create_olm_network</span><span class="p">())</span>
    <span class="c1"># Assign target for the simulation</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">assign_simulation_target</span><span class="p">(</span><span class="s2">&quot;single_olm_cell_network&quot;</span><span class="p">)</span>

    <span class="c1"># Recording information from the simulation</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">create_output_file</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;.dat&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span> <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0[0]/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_soma_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/0/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_soma_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/1/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_axon_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/2/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_axon_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/3/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_dend_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/4/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_dend_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/6/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_dend_1&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/5/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_dend_1&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/7/v&quot;</span><span class="p">)</span>
    <span class="c1"># Save LEMS simulation to file</span>
    <span class="n">sim_file</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">()</span>

    <span class="c1"># Run the simulation using the NEURON simulator</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">run_lems_with_jneuroml_neuron</span><span class="p">(</span><span class="n">sim_file</span><span class="p">,</span> <span class="n">max_memory</span><span class="o">=</span><span class="s2">&quot;2G&quot;</span><span class="p">,</span> <span class="n">nogui</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip_run</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># Plot the data</span>
    <span class="n">plot_data</span><span class="p">(</span><span class="n">sim_id</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we first create a <code class="docutils literal notranslate"><span class="pre">LEMSSimulation</span></code> instance and include our network NeuroML file in it.
We must inform LEMS what the target of the simulation is.
In our case, it’s the id of our network, <code class="docutils literal notranslate"><span class="pre">single_olm_cell_network</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">simulation</span> <span class="o">=</span> <span class="n">LEMSSimulation</span><span class="p">(</span><span class="n">sim_id</span><span class="o">=</span><span class="n">sim_id</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">simulation_seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
    <span class="c1"># Include the NeuroML model file</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">include_neuroml2_file</span><span class="p">(</span><span class="n">create_olm_network</span><span class="p">())</span>
    <span class="c1"># Assign target for the simulation</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">assign_simulation_target</span><span class="p">(</span><span class="s2">&quot;single_olm_cell_network&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We also want to record some information, so we create an output file first with an <code class="docutils literal notranslate"><span class="pre">id</span></code> of <code class="docutils literal notranslate"><span class="pre">output0</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span> <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0[0]/v&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, we can record any quantity that is exposed by NeuroML (any <code class="docutils literal notranslate"><span class="pre">exposure</span></code>).
Here, for example, we add columns for the membrane potentials <code class="docutils literal notranslate"><span class="pre">v</span></code> of the different segments of the <a class="reference internal" href="Schemas/Cells.html#schema-cell"><span class="std std-ref">cell</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_soma_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/0/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_soma_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/1/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_axon_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/2/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_axon_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/3/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_dend_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/4/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_dend_0&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/6/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg0_dend_1&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/5/v&quot;</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">add_column_to_output_file</span><span class="p">(</span><span class="s2">&quot;output0&quot;</span><span class="p">,</span>
                                         <span class="n">column_id</span><span class="o">=</span><span class="s2">&quot;pop0_0_v_Seg1_dend_1&quot;</span><span class="p">,</span>
                                         <span class="n">quantity</span><span class="o">=</span><span class="s2">&quot;pop0/0/olm/7/v&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The path required to point to the <code class="docutils literal notranslate"><span class="pre">quantity</span></code> (exposure) to be recorded needs to be correctly provided.
Here, where we use a <a class="reference internal" href="Schemas/Networks.html#schema-populationlist"><span class="std std-ref">population list</span></a> that includes an <a class="reference internal" href="Schemas/Networks.html#schema-instance"><span class="std std-ref">instance</span></a> of the cell, it is: <code class="docutils literal notranslate"><span class="pre">population_id/instance_id/cell</span> <span class="pre">component</span> <span class="pre">type/segment</span> <span class="pre">id/exposure</span></code>. (See tickets <a class="reference external" href="https://github.com/NeuroML/Documentation/issues/15">15</a> and <a class="reference external" href="https://github.com/NeuroML/Documentation/issues/16">16</a>)</p>
<p>We then save the LEMS simulation file, and run our simulation with the <a class="reference internal" href="SimulatingNeuroMLModels.html#userdocs-simulating-models-neuron"><span class="std std-ref">NEURON</span></a> simulator (since the default <a class="reference internal" href="Software/jNeuroML.html#jneuroml"><span class="std std-ref">jNeuroML</span></a> simulator can only simulate single compartment cells).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">sim_file</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">()</span>

    <span class="c1"># Run the simulation using the NEURON simulator</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">run_lems_with_jneuroml_neuron</span><span class="p">(</span><span class="n">sim_file</span><span class="p">,</span> <span class="n">max_memory</span><span class="o">=</span><span class="s2">&quot;2G&quot;</span><span class="p">,</span> <span class="n">nogui</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip_run</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plotting-the-recorded-variables">
<h2>Plotting the recorded variables<a class="headerlink" href="#plotting-the-recorded-variables" title="Link to this heading">#</a></h2>
<p>To plot the variables that we recorded, we write a simple function that reads the data and uses the <code class="docutils literal notranslate"><span class="pre">generate_plot</span></code> utility function which generates the membrane potential graphs for different segments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">plot_data</span><span class="p">(</span><span class="n">sim_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plot the sim data.</span>

<span class="sd">    Load the data from the file and plot the graph for the membrane potential</span>
<span class="sd">    using the pynml generate_plot utility function.</span>

<span class="sd">    :sim_id: ID of simulaton</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;.dat&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (soma seg 0)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg0_soma0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (soma seg 1)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg1_soma0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (axon seg 0)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg0_axon0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
    <span class="n">pynml</span><span class="o">.</span><span class="n">generate_plot</span><span class="p">([</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">data_array</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]],</span> <span class="s2">&quot;Membrane potential (axon seg 1)&quot;</span><span class="p">,</span> <span class="n">show_plot_already</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figure_to</span><span class="o">=</span><span class="n">sim_id</span> <span class="o">+</span> <span class="s2">&quot;_seg1_axon0-v.png&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s2">&quot;time (s)&quot;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s2">&quot;membrane potential (V)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This concludes this example.
Here we have seen how to create, simulate, record, and visualise a multi-compartment neuron.
In the next section, you will find an interactive notebook where you can play with this example.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "NeuroML/Documentation",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Userdocs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="NML2_examples/HH_single_compartment.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Interactive single compartment HH example</p>
      </div>
    </a>
    <a class="right-next"
       href="NML2_examples/OLM.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Interactive multi-compartment OLM cell example</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-model-in-neuroml">Declaring the model in NeuroML</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-cell">Declaring the cell</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-network">Declaring the network</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-generated-neuroml-model">The generated NeuroML model</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-the-model">Simulating the model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-the-recorded-variables">Plotting the recorded variables</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By NeuroML contributors
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>